
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Premmerce</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;php&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="php">php</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#premmerce" class="toc-h1 toc-link" data-title="Premmerce">Premmerce</a>
          </li>
          <li>
            <a href="#wordpress" class="toc-h1 toc-link" data-title="Wordpress">Wordpress</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-plugin" class="toc-h2 toc-link" data-title="Wordpress">Create plugin</a>
                  </li>
                  <li>
                    <a href="#activation-deactivation-uninstall" class="toc-h2 toc-link" data-title="Wordpress">Activation/Deactivation/Uninstall</a>
                  </li>
                  <li>
                    <a href="#administration-menu" class="toc-h2 toc-link" data-title="Wordpress">Administration menu</a>
                  </li>
                  <li>
                    <a href="#assets" class="toc-h2 toc-link" data-title="Wordpress">Assets</a>
                  </li>
                  <li>
                    <a href="#validation-and-security" class="toc-h2 toc-link" data-title="Wordpress">Validation and Security</a>
                  </li>
                  <li>
                    <a href="#internationalization" class="toc-h2 toc-link" data-title="Wordpress">Internationalization</a>
                  </li>
                  <li>
                    <a href="#hooks" class="toc-h2 toc-link" data-title="Wordpress">Hooks</a>
                  </li>
                  <li>
                    <a href="#actions" class="toc-h2 toc-link" data-title="Wordpress">Actions</a>
                  </li>
                  <li>
                    <a href="#filters" class="toc-h2 toc-link" data-title="Wordpress">Filters</a>
                  </li>
                  <li>
                    <a href="#filters-reference" class="toc-h2 toc-link" data-title="Wordpress">Filters Reference</a>
                  </li>
                  <li>
                    <a href="#database-structure" class="toc-h2 toc-link" data-title="Wordpress">Database structure</a>
                  </li>
                  <li>
                    <a href="#posts" class="toc-h2 toc-link" data-title="Wordpress">Posts</a>
                  </li>
                  <li>
                    <a href="#custom-post-types" class="toc-h2 toc-link" data-title="Wordpress">Custom post types</a>
                  </li>
                  <li>
                    <a href="#metadata-api" class="toc-h2 toc-link" data-title="Wordpress">Metadata API</a>
                  </li>
                  <li>
                    <a href="#hidden-custom-fields" class="toc-h2 toc-link" data-title="Wordpress">Hidden Custom Fields</a>
                  </li>
                  <li>
                    <a href="#meta-boxes" class="toc-h2 toc-link" data-title="Wordpress">Meta Boxes</a>
                  </li>
                  <li>
                    <a href="#settings-api" class="toc-h2 toc-link" data-title="Wordpress">Settings API</a>
                  </li>
                  <li>
                    <a href="#options-api" class="toc-h2 toc-link" data-title="Wordpress">Options API</a>
                  </li>
                  <li>
                    <a href="#settings-page" class="toc-h2 toc-link" data-title="Wordpress">Settings page</a>
                  </li>
                  <li>
                    <a href="#shortcodes" class="toc-h2 toc-link" data-title="Wordpress">Shortcodes</a>
                  </li>
                  <li>
                    <a href="#taxonomies" class="toc-h2 toc-link" data-title="Wordpress">Taxonomies</a>
                  </li>
                  <li>
                    <a href="#users" class="toc-h2 toc-link" data-title="Wordpress">Users</a>
                  </li>
                  <li>
                    <a href="#user-meta" class="toc-h2 toc-link" data-title="Wordpress">User Meta</a>
                  </li>
                  <li>
                    <a href="#roles-and-capabilities" class="toc-h2 toc-link" data-title="Wordpress">Roles and Capabilities</a>
                  </li>
                  <li>
                    <a href="#widgets" class="toc-h2 toc-link" data-title="Wordpress">Widgets</a>
                  </li>
                  <li>
                    <a href="#wpdb" class="toc-h2 toc-link" data-title="Wordpress">WPDB</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#woocommerce" class="toc-h1 toc-link" data-title="Woocommerce">Woocommerce</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#hooks" class="toc-h2 toc-link" data-title="Woocommerce">Hooks</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#premmerce-dev-tools" class="toc-h1 toc-link" data-title="Premmerce Dev Tools">Premmerce Dev Tools</a>
          </li>
          <li>
            <a href="#premmerce-woocommerce-brands" class="toc-h1 toc-link" data-title="Premmerce WooCommerce Brands">Premmerce WooCommerce Brands</a>
          </li>
          <li>
            <a href="#woocommerce-customers-manager" class="toc-h1 toc-link" data-title="WooCommerce Customers Manager">WooCommerce Customers Manager</a>
          </li>
          <li>
            <a href="#woocommerce-permalink-manager" class="toc-h1 toc-link" data-title="WooCommerce Permalink Manager">WooCommerce Permalink Manager</a>
          </li>
          <li>
            <a href="#woocommerce-seo-addon" class="toc-h1 toc-link" data-title="WooCommerce SEO Addon">WooCommerce SEO Addon</a>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='#'>Sign Up for a Developer Key</a></li>
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='premmerce'>Premmerce</h1>
<p>Welcome to the Premmerce developers documentation!</p>
<h1 id='wordpress'>Wordpress</h1>
<p>Офіційна документація:  </p>

<ul>
<li><a href="https://developer.wordpress.org/plugins/">Plugins handbook</a></li>
<li><a href="https://developer.wordpress.org/themes/">Theme Handbook</a></li>
<li><a href="https://developer.wordpress.org/reference/">Code reference</a></li>
<li><a href="https://developer.wordpress.org/rest-api/">REST API Handbook</a></li>
<li><a href="https://developer.wordpress.org/cli/commands/">WP-CLI Commands</a></li>
</ul>
<h2 id='create-plugin'>Create plugin</h2>
<blockquote>
<p>Заголовки в файлі плагіну.</p>
</blockquote>
<pre class="highlight php tab-php"><code>/**
 * Plugin Name: Name
 * Plugin URI: http://сторінка-плагіну
 * Description: Short description
 * Version: Версія, наприклад: 1.0
 * Author: Автор
 * Author URI: http://сторінка-автора
 * License:      GPL2
 * License URI:  https://www.gnu.org/licenses/gpl-2.0.html
 * Text Domain:  domain-name
 * Domain Path:  /languages
 */
</code></pre>
<p><a href="https://developer.wordpress.org/plugins/">Повна документація</a><br>
Для створення плагіну достатньо створити php файл в папці 
/wp-content/plugins. Файл повинен містити інформаційний заголовок, 
якщо плагін потребує більше файлів створюємо папку в яку кладемо головний файл плагіну.
<a href="https://developer.wordpress.org/plugins/the-basics/header-requirements/">Повна документація по заголовкам</a></p>
<h2 id='activation-deactivation-uninstall'>Activation/Deactivation/Uninstall</h2>
<blockquote>
<p>Зареєструвати хук активації</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="nx">register_activation_hook</span><span class="p">(</span> <span class="k">__FILE__</span><span class="p">,</span> <span class="s1">'callback'</span> <span class="p">);</span>
</code></pre>
<blockquote>
<p>Зареєструвати хук деактивації</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="nx">register_deactivation_hook</span><span class="p">(</span> <span class="k">__FILE__</span><span class="p">,</span> <span class="s1">'callback'</span> <span class="p">);</span>
</code></pre>
<blockquote>
<p>Зареєструвати хук видалення</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="nx">register_uninstall_hook</span><span class="p">(</span><span class="k">__FILE__</span><span class="p">,</span> <span class="s1">'callback'</span><span class="p">);</span>
</code></pre>
<p>Для того щоб виконати певні операції при встановленні/деактивації/видаленні плагіну використовуються хуки.
Таким чином можна зареєструвати колбек, який буде викликатись при цих операціях.
Це портібно для підготвоки оточення для плагіну(створення таблиць в БД, початкова конфігурація), 
та очистки при деактивації чи видаленні плагіну.</p>

<ul>
<li><code>register_activation_hook</code> викликається при встановленні плагіну<br></li>
<li><code>register_deactivation_hook</code> викликається при деактивації плагіну<br></li>
<li><code>register_uninstall_hook</code> викликається при видаленні плагіну<br></li>
</ul>

<aside class="warning">
Через <code>register_uninstall_hook</code> можна зареєструвати тільки функцію або статичний метод класу
</aside>

<p>Різниця між uninstall та deactivation та сценарії:</p>

<table><thead>
<tr>
<th>Scenario</th>
<th>Deactivation</th>
<th>Uninstall</th>
</tr>
</thead><tbody>
<tr>
<td>Видалити кеш тимчасові файли</td>
<td>так</td>
<td>ні</td>
</tr>
<tr>
<td>Видалити пермалінки</td>
<td>так</td>
<td>ні</td>
</tr>
<tr>
<td>Видалити налаштування</td>
<td>ні</td>
<td>так</td>
</tr>
<tr>
<td>Видалити таблиці з БД</td>
<td>ні</td>
<td>так</td>
</tr>
</tbody></table>
<h2 id='administration-menu'>Administration menu</h2>
<blockquote>
<p>Usage</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="nx">add_action</span><span class="p">(</span> <span class="s1">'admin_menu'</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">add_menu_page</span><span class="p">(</span> <span class="s1">'Plugin page title'</span><span class="p">,</span>
        <span class="s1">'Plugin menu title'</span><span class="p">,</span>
        <span class="s1">'manage_options'</span><span class="p">,</span>
        <span class="s1">'plugin-slug'</span><span class="p">,</span>
        <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">echo</span> <span class="s1">'&lt;h1&gt;My plugin page&lt;/h1&gt;'</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="s1">'dashicons-dashboard'</span> <span class="p">);</span>
<span class="p">}</span> <span class="p">);</span>
</code></pre>
<p>Функції для управління адміністративним меню.</p>
<h3 id='add_menu_page'>add_menu_page</h3>
<p>Додати сторінку до верхнього рівня меню</p>

<p><code>add_menu_page($page_title,  
     $menu_title,  
     $capability,  
     $menu_slug,   
     $function,  
     $icon_url,  
     $position  
)</code></p>

<p><em>Параметри:</em><br>
<code>string $page_title</code> - title сторінки<br>
<code>string $menu_title</code> - назва меню<br>
<code>string $capability</code> - права доступу до сторінки<br>
<code>string $menu_slug</code> - slug сторінки
<code>callable $function</code> - функція яка відображає контент сторінку<br>
<code>string $icon_url</code> - dashicon або посилання на зображення, за замовчуванням іконки немає
<code>int $position</code> -  позиція елементу меню</p>
<h3 id='add_submenu_page'>add_submenu_page</h3>
<p>Додати підменю</p>

<p><code>add_submenu_page($parent_slug, $page_title, $menu_title, $capability, $menu_slug, $function)</code></p>

<p><em>Параметри:</em><br>
<code>string $parent_slug</code> - slug пункту меню до якого добавити<br>
<code>string $page_title</code> - title сторінки<br>
<code>string $menu_title</code> - назва меню<br>
<code>string $capability</code> - права доступу до сторінки<br>
<code>string $menu_slug</code> - slug сторінки
<code>callable $function</code> - функція яка відображає контент сторінку  </p>
<h3 id='remove_menu_page'>remove_menu_page</h3>
<p>Видалити пункт меню  рівня.</p>

<p><code>remove_menu_page(string $menu_slug)</code></p>

<p><em>Параметри:</em><br>
<code>string $menu_slug</code> - slug сторінки </p>
<h2 id='assets'>Assets</h2><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="c1">// Зареєструвати скрипт
</span><span class="nx">wp_register_script</span><span class="p">(</span> <span class="s1">'my_plugin_script'</span><span class="p">,</span> <span class="s1">'path/to/myscript.js'</span> <span class="p">);</span>

<span class="c1">// Локалізувати скрипт
</span><span class="nv">$translation_array</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'some_string'</span> <span class="o">=&gt;</span> <span class="nx">__</span><span class="p">(</span> <span class="s1">'Some string to translate'</span><span class="p">,</span> <span class="s1">'my-plugin-domain'</span> <span class="p">),</span>
    <span class="s1">'value'</span> <span class="o">=&gt;</span> <span class="s1">'10'</span>
<span class="p">);</span>

<span class="nx">wp_localize_script</span><span class="p">(</span> <span class="s1">'my_plugin_script'</span><span class="p">,</span> <span class="s1">'object_name'</span><span class="p">,</span> <span class="nv">$translation_array</span> <span class="p">);</span>

<span class="c1">// Додати скрипт з локалізованими даними.
</span><span class="nx">wp_enqueue_script</span><span class="p">(</span> <span class="s1">'my_plugin_script'</span> <span class="p">);</span>
<span class="cp">?&gt;</span>
<span class="nt">&lt;script&gt;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">object_name</span><span class="p">.</span><span class="nx">value</span> <span class="p">);</span> <span class="c1">// 10</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre>
<p>Вордрес надає функці для коректної загрузки CSS та JS. Основні з них 
<code>wp_register_script</code>, <code>wp_enqueue_script</code>, <code>wp_register_style</code> та <code>wp_enqueue_style</code>.
Також в ядрі вордпресу є вже зареєстровані скрипти такі як jquery і.т.п.
<a href="https://developer.wordpress.org/reference/functions/wp_register_script/#core-registered-scripts">Список скриптів</a></p>
<h3 id='wp_register_script'>wp_register_script</h3>
<p>Зареєструвати новий скрипт, для того щоб потім додатии його в чергу на вивід</p>

<p><code>
wp_register_script( 
    string $handle, 
    string $src, 
    array $deps = array(), 
    string|bool|null $ver = false, 
    bool $in_footer = false )
</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $handle</code> - Унікальна назва скрипта<br></li>
<li><code>string $src</code> - Повний URL<br></li>
<li><code>array $deps = array()</code> - Залежності<br></li>
<li><code>string|bool|null $ver = false</code> - Версія</li>
<li><code>bool $in_footer = false</code> - Підключати скрипт в футері</li>
</ul>
<h3 id='wp_enqueue_script'>wp_enqueue_script</h3>
<p>Зареєструвати скрипт та додати в чергу на вивід</p>

<p><code>wp_enqueue_script( 
    string $handle, 
    string $src = &#39;&#39;, 
    array $deps = array(), 
    string|bool|null $ver = false, 
    bool $in_footer = false 
)</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $handle</code> - Унікальна назва скрипта<br></li>
<li><code>string $src</code> - Повний URL<br></li>
<li><code>array $deps = array()</code> - Залежності<br></li>
<li><code>string|bool|null $ver = false</code> - Версія</li>
<li><code>bool $in_footer = false</code> - Підключати скрипт в футері</li>
</ul>
<h3 id='wp_register_style'>wp_register_style</h3>
<p>Зареєструвати CSS</p>

<p><code>wp_register_style( 
    string $handle, 
    string $src, 
    array $deps = array(), 
    string|bool|null $ver = false, 
    string $media = &#39;all&#39; 
)</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $handle</code> - Унікальна назва стилю<br></li>
<li><code>string $src</code> - Повний URL<br></li>
<li><code>array $deps = array()</code> - Залежності<br></li>
<li><code>string|bool|null $ver = false</code> - Версія</li>
<li><code>string $media = &#39;all&#39;</code> - Тип медіа(&#39;all&#39;, &#39;print&#39;, &#39;screen&#39;) або медіа запити (orientation: portrait)&#39; та &#39;(max-width: 640px)</li>
</ul>
<h3 id='wp_enqueue_style'>wp_enqueue_style</h3>
<p>Зареєструвати CSS та додати в чергу </p>

<p><code>wp_enqueue_style( 
    string $handle, 
    string $src = &#39;&#39;, 
    array $deps = array(), 
    string|bool|null $ver = false, 
    string $media = &#39;all&#39; 
)</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $handle</code> - Унікальна назва стилю<br></li>
<li><code>string $src</code> - Повний URL<br></li>
<li><code>array $deps = array()</code> - Залежності<br></li>
<li><code>string|bool|null $ver = false</code> - Версія</li>
<li><code>string $media = &#39;all&#39;</code> - Тип медіа(&#39;all&#39;, &#39;print&#39;, &#39;screen&#39;) або медіа запити (orientation: portrait)&#39; та &#39;(max-width: 640px)</li>
</ul>
<h3 id='wp_localize_script'>wp_localize_script</h3>
<p>Локалізація скрипта, також може бути використано для передачі значення з php коду в js</p>

<p><code>wp_localize_script( 
    string $handle, 
    string $object_name, 
    array $l10n 
);
</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $handle</code> - Назва скрипта</li>
<li><code>string $object_name</code> - Назва js обєкту</li>
<li><code>array $l10n</code> - Масив даних які будуть передані в js об&#39;єкт</li>
</ul>
<h2 id='validation-and-security'>Validation and Security</h2><h3 id='php-functions'>PHP functions</h3>
<ul>
<li><code>isset()</code> та <code>empty()</code> перевірка чи змінна існує і не порожня</li>
<li><code>mb_strlen()</code> або <code>strlen()</code> для перевірки довжини строки</li>
<li><code>preg_match()</code>, <code>strpos()</code> для перевірки чи підстрока в строці</li>
<li><code>count()</code> перевірка кількості елементів в масиві</li>
<li><code>in_array()</code> перевірка чи елемент в масиві</li>
</ul>
<h3 id='wordpress-functions'>WordPress functions</h3>
<ul>
<li><code>is_email()</code> перевірка чи email валідний</li>
<li><code>term_exists()</code> - перевірка чи існує тег категорія чи інший терм</li>
<li><code>username_exists()</code> - перевірка чи існує користувач з заданим іменем</li>
<li><code>validate_file()</code> перевірка чи це реальний шлях(існування файлу не перевіряється)</li>
</ul>
<h3 id='securing-input'>Securing input</h3>
<p>Процес очистки вхідних даних, потрібен коли невідомо які дані можуть прийти, 
або ви не хочете обмежувати користувача валідацією. Для цього в вордпресі існує ряд функцій.</p>

<p><code>sanitize_email(string $email)</code> - очистка недопустимих символів в email.</p>

<p><code>sanitize_file_name(string  $name)</code> - Очистка недопустимих символів в імені файлу.</p>

<p><code>sanitize_html_class(string $class, string $fallback)</code> - Очистка недопустимих символів в html класі</p>

<p><code>sanitize_key($key)</code> - Приведення до нижнього регістру та очистка недопустимих символів в ключі масиву</p>

<p><code>sanitize_mime_type(string $mime_type)</code> - Очистка недопустимих символів mime тип</p>

<p><code>sanitize_text_field(string $str)</code> - 
Очистка строки введеної користувачем або з БД</p>

<p><code>sanitize_title( $title, $fallback_title, $context )</code> - 
Очистка недопустимих символів в назві</p>

<p><code>sanitize_title_for_query(string $title)</code> - 
очистка недопустимих символів для запиту в БД  </p>

<p><code>sanitize_title_with_dashes(string $title, string $unused, string(&#39;display&#39;|&#39;save&#39;) $context)</code> - 
заміна пробілів на символ <code>-</code> </p>

<p><code>sanitize_user(string $username, boolean $strict)</code> - 
очистка недопустимих символів в імені користувача  </p>

<p><code>esc url(string $url, array $protocols,string  $_context)</code> - 
очистка недопустимих символів  </p>

<p><code>esc_url_raw(string $url, array $protocols)</code> - 
очистка недопустимих символів в URL, на відміну від escape_url, не замінює символи для виводу, 
вихідний URL безпечний для БД, редіректів та HTTP запитів  </p>

<p><code>wp_filter_post_kses($data)</code> - 
очистка недопустимих HTML тегів для контенту поста  </p>

<p><code>wp_filter_nohtml_kses($data)</code> - 
очистка всіх HTML тегів </p>
<h3 id='securing-output'>Securing output</h3>
<p>Очистка виводу. Для цього в вордпресі існує ряд функцій.</p>

<ul>
<li><code>esc_html()</code> - Для виводу даних в шаблоні</li>
<li><code>esc_url()</code> - Для виводу всіх URL</li>
<li><code>esc_js()</code>- Для inline Javascript.</li>
<li><code>esc_attr()</code> - Для HTML атрибутів</li>
</ul>
<h3 id='nonces'>Nonces</h3>
<p>Nonce(number used once) - це токени, які використовуються для перевірки запитів в цілях безпеки.
Наприклад згенероване посилання для видалення поста
<code>http://wpmag.ru/wp-admin/post.php?post=123&amp;action=trash&amp;_wpnonce=b192fc4204</code></p>

<p>не буде працювати для іншого поста
<code>http://wpmag.ru/wp-admin/post.php?post=456&amp;action=trash&amp;_wpnonce=b192fc4204</code></p>

<p>Також це захист від підробки запитів(CSRF).</p>

<p>Кожен Nonce може використовуватися тільки один раз, і має обмежений термін дії.</p>

<p><code>wp_nonce_field( $action, $name, $referer, $echo )</code> - використовується для генерації nonce</p>

<p><code>wp_create_nonce($action)</code> - генерує nonce</p>

<p><code>wp_nonce_url()</code> - Retrieve URL with nonce added to URL query.</p>
<h2 id='internationalization'>Internationalization</h2>
<p>Переклади для плагіну повинні мати простір імен(домен). 
Самі файли перекладів не підгружаються автоматично їх потрібно загрузити по action &#39;init&#39;, 
за допомогою функції <code>load_plugin_textdomain</code></p>

<blockquote>
<p>Загрузка файлів перекладу</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="nx">add_action</span><span class="p">(</span> <span class="s1">'init'</span><span class="p">,</span> <span class="p">[</span> <span class="nv">$this</span><span class="p">,</span> <span class="s1">'loadTextDomain'</span> <span class="p">]</span> <span class="p">);</span>

<span class="sd">/**
 * Load plugin translations
 */</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">loadTextDomain</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">load_plugin_textdomain</span><span class="p">(</span> <span class="s1">'translation-domain'</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span>  <span class="s1">'plugin_name/languages/'</span> <span class="p">);</span>
<span class="p">}</span>
</code></pre>
<p>Для виводу перекладеної строки потрібно викликати  __() або _e();</p>

<blockquote>
<p>Повернути перекладену строку</p>
</blockquote>
<pre class="highlight php tab-php"><code>__($message, $domain)
</code></pre>
<blockquote>
<p>Вивести перекладену строку</p>
</blockquote>
<pre class="highlight php tab-php"><code>виводить дані - _e($message, $domain)
</code></pre><h3 id=''>Процес перекладу</h3>
<p>В корні плагіну створюємо папку languages, через poedit створюємо файли перекладів для кожної мови окремо.
Файли перекладів повинні мати таке саме ім&#39;я як плагін </p>

<p><a href="'http://www.gsy-design.com/how-to-generate-a-pot-file-using-poedit/'">Інструкція по poedit</a></p>
<h2 id='hooks'>Hooks</h2>
<p>Хуки створені для того щоб надати можливість розширювати функціонал вордпрес не змінюючи коду
ядра. Існують два типи хуків Filter та Action.</p>
<h2 id='actions'>Actions</h2>
<p>Actions - це функції які виконуються при певній події, 
наприклад при збереженні поста, зміні теми, відображені сторінки.</p>
<h3 id=''>Перевірка чи існує подія</h3>
<p><code>has_action( string $tag, callable $callback)</code></p>
<h3 id='-2'>Добавити функцію до події</h3>
<p><code>add_action( string $tag, callable $callback, int $priority, int $accepted_args)</code></p>
<h3 id='-3'>Створити подію</h3>
<p><code>do_action( string $tag, mixed $arg)</code></p>
<h3 id='-4'>Створити подію з масивом аргументів</h3>
<p><code>do_action_ref_array(string $tag, array $args)</code></p>
<h3 id='-5'>Отримати скільки разів викликалась подія</h3>
<p><code>did_action(string $tag)</code></p>
<h3 id='-6'>Видалити функція підписану на подію</h3>
<p><code>remove_action(string $tag, callable $callback, int $priority)</code></p>
<h3 id='-7'>Видалити всі хуки прикріплені до події</h3>
<p><code>remove_all_actions(string $tag, int $priority)</code></p>
<h3 id='-8'>Перевірити чи зараз виконується подія</h3>
<p><code>doing_action(string $action)</code></p>
<h2 id='filters'>Filters</h2>
<p>Filters - Це функції які обробляють дані перед тим як продовжити 
якусь операцію (вивід, запис в БД). Фільтри повинні повертати дані.</p>
<h3 id='-9'>Перевірка чи існує фільтр</h3>
<p><code>has_filter(string $tag, callable $callback)</code></p>
<h3 id='-10'>Додати фільтр</h3>
<p><code>add_filter(string $tag, callable $callback, int $priority, int $accepted_args)</code></p>
<h3 id='-11'>Додати фільтр з масивом аргументів</h3>
<p><code>apply_filters_ref_array(string $tag, array $args)</code></p>
<h3 id='-12'>Отримати назву поточного хука</h3>
<p><code>current_filter()</code></p>
<h3 id='-13'>Видалити фільтр</h3>
<p><code>remove_filter(string $tag, callable $callback, int $priority)</code></p>
<h3 id='-14'>Створення кастомної події для фільтрування</h3>
<p><code>apply_filters(string $tag, mixed $value)</code></p>
<h3 id='-15'>Реєстрація фільтру</h3>
<p><code>add_filter(string $tag , callable $callback, int $priority, int $accepted_args)</code></p>
<h3 id='-16'>Видалити всі хуки для фільтру</h3>
<p><code>remove_all_filters(string $tag, int $priority)</code></p>
<h3 id='-17'>Перевірити чи зараз виконується фільтр</h3>
<p><code>doing_filter(string $filter)</code></p>
<h2 id='filters-reference'>Filters Reference</h2><h3 id='save_post_-post_type'>save_post_{post_type}</h3>
<p>Хук що спрацьовує при збереженні поста типу post_type. Для товарів, save_post_product  </p>

<p>Тип: action<br>
Параметри:  </p>

<ol>
<li>int $post_id   - post id</li>
<li>WP_Post  $post - post object</li>
<li>bool $updated  - whether this is an existing post being updated or not.</li>
</ol>
<h3 id='wp_trash_post'>wp_trash_post</h3>
<p>Хук що спрацьовує при пересенні поста в корзину</p>

<p>Тип: action<br>
Параметри:</p>

<ol>
<li>int $post_id - Post ID</li>
</ol>
<h2 id='database-structure'>Database structure</h2>
<p><a href="https://codex.wordpress.org/Database_Description">Database Description</a></p>

<ul>
<li><code>wp_comments</code> - коменти</li>
<li><code>wp_commentmeta</code> - додаткові дані коментів</li>
<li><code>wp_options</code>  - налаштування</li>
<li><code>wp_posts</code> - пости ( пости, сторінки, товари, аттачменти(зображення постів), елементи меню, замовлення)</li>
<li><code>wp_postmeta</code>-  додаткові дані постів</li>
<li><code>wp_terms</code> - терміни таксономії (Значення властивостей, категорії, теги)</li>
<li><code>wp_term_relationships</code> - джойнить терми до постів</li>
<li><code>wp_term_taxonomy</code> - визначає до якої таксономії (властивість, категорія, тип товару, тег, бренд) відноситься кожен термін.</li>
<li><code>wp_users</code> - користувачі</li>
<li><code>wp_usermeta</code> - додаткові дані користувачів</li>
<li><code>wp_links</code> - застаріла таблиця</li>
</ul>
<h2 id='posts'>Posts</h2>
<p>Пости це основний тип даних Wordpress, за допомогою постів реалізовані, сторінки, товари, замовлення, пункти меню, зображення.</p>
<h2 id='custom-post-types'>Custom post types</h2>
<blockquote>
<p>Реєстрація кастомного типу поста</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">function</span> <span class="nf">custom_post_type</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">register_post_type</span><span class="p">(</span><span class="s1">'premmerce_video'</span><span class="p">,</span>
        <span class="p">[</span>
            <span class="s1">'labels'</span>              <span class="o">=&gt;</span> <span class="p">[</span>
                <span class="s1">'name'</span>          <span class="o">=&gt;</span> <span class="nx">__</span><span class="p">(</span><span class="s1">'Video'</span><span class="p">),</span>
                <span class="s1">'singular_name'</span> <span class="o">=&gt;</span> <span class="nx">__</span><span class="p">(</span><span class="s1">'Videos'</span><span class="p">),</span>
            <span class="p">],</span>
            <span class="s1">'public'</span>              <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
            <span class="s1">'has_archive'</span>         <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
            <span class="s1">'show_ui'</span>             <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
            <span class="s1">'show_in_menu'</span>        <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
            <span class="s1">'menu_position'</span>       <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">,</span>
            <span class="s1">'menu_icon'</span>           <span class="o">=&gt;</span> <span class="s1">'dashicons-admin-page'</span><span class="p">,</span>
            <span class="s1">'show_in_admin_bar'</span>   <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
            <span class="s1">'show_in_nav_menus'</span>   <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
            <span class="s1">'can_export'</span>          <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
            <span class="s1">'exclude_from_search'</span> <span class="o">=&gt;</span> <span class="kc">false</span><span class="p">,</span>
            <span class="s1">'publicly_queryable'</span>  <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">);</span>
<span class="p">}</span>

<span class="nx">add_action</span><span class="p">(</span> <span class="s1">'init'</span><span class="p">,</span> <span class="s1">'custom_post_type'</span> <span class="p">);</span>
</code></pre>
<blockquote>
<p>Запит кастомного типу</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="nv">$args</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'post_type'</span>      <span class="o">=&gt;</span> <span class="s1">'premmerce_video'</span><span class="p">,</span>
    <span class="s1">'posts_per_page'</span> <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>
<span class="p">];</span>
<span class="nv">$loop</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">(</span><span class="nv">$args</span><span class="p">);</span>
<span class="k">while</span> <span class="p">(</span><span class="nv">$loop</span><span class="o">-&gt;</span><span class="na">have_posts</span><span class="p">())</span> <span class="p">{</span>
    <span class="nv">$loop</span><span class="o">-&gt;</span><span class="na">the_post</span><span class="p">();</span>
    <span class="cp">?&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"entry-content"</span><span class="nt">&gt;</span>
        <span class="cp">&lt;?php</span> <span class="nx">the_title</span><span class="p">();</span> <span class="cp">?&gt;</span>
        <span class="cp">&lt;?php</span> <span class="nx">the_content</span><span class="p">();</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="cp">&lt;?php</span>
<span class="p">}</span>
<span class="cp">?&gt;</span>
</code></pre>
<blockquote>
<p>Розширення main query для вибірки кастомного типу</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">function</span> <span class="nf">wporg_add_custom_post_types</span><span class="p">(</span><span class="nv">$query</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">is_home</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">is_main_query</span><span class="p">())</span> <span class="p">{</span>
        <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">'post_type'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'post'</span><span class="p">,</span> <span class="s1">'page'</span><span class="p">,</span> <span class="s1">'premmerce_video'</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nv">$query</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">add_action</span><span class="p">(</span><span class="s1">'pre_get_posts'</span><span class="p">,</span> <span class="s1">'wporg_add_custom_post_types'</span><span class="p">);</span>

</code></pre>
<p>За замовчуванням в Wordpress 5 типів постів:</p>

<ul>
<li>post</li>
<li>page</li>
<li>attachment</li>
<li>revision</li>
<li>nav_menu_item</li>
<li>custom_css</li>
<li>customize_changeset</li>
</ul>

<p>При розробці плагіну часто потрібно реалізувати свої типи постів наприклад, товари для e-commerce сайтів
відео для сайтів з оглядами. Для того щоб додати свій потрібно зареєструвати новий post_type за допомогою <code>register_post_type</code>.
Новий тип за замовчуванням не буде автоматично вибиратися з бази на сторінці постів, але цю поведінку можна змінити шляхом
розширення головного запиту (main query) (див. приклад праворуч). </p>
<h3 id='register_post_type'>register_post_type()</h3>
<p>Реєстрація типа поста</p>

<p><code>register_post_type( string $post_type, array|string $args = array() )</code></p>

<p><strong><em>Params:</em></strong><br>
<code>string $post_type</code> - Унікальний ключ типу<br>
<code>array $args</code> - Масив з описом типу(<a href="https://developer.wordpress.org/reference/functions/register_post_type/">register post type</a>)  </p>

<aside class="warning">
Функція register_post_type() повинна викликатись перед `admin_init` та після `after_setup_theme` хуків.
Найкращий варіант використовувати хук `init`.
</aside>

<aside class="warning">
Для того щоб уникнути конфліктів між плагінами ідентифікатор повинен бути унікальним
</aside>
<h2 id='metadata-api'>Metadata API</h2>
<p>Metadata API - це швидкий спосіб маніпуляції метаданими об&#39;єктів Wordpress
такий як post, comment, user, term.</p>

<p>Для конкретних обєктів існують функції, 
які дають можливість працювати з мета даними:</p>
<h3 id=''>Функції для роботи з метаданими.</h3>
<p><code>get_post_meta( int $post_id, string $key = &#39;&#39;, bool $single = false )</code></p>

<p><strong><em>Params:</em></strong><br>
<code>int $post_id</code> - id поста<br>
<code>string $meta_key</code> - ключ
<code>bool $single = false</code> - повернути одне значення</p>

<p><strong><em>Return:</em></strong> 
<code>mixed</code> - масив або значення, в залежності від значення $single</p>
<h3 id='add_post_meta'>add_post_meta()</h3>
<p>Додати поле до поста</p>

<p><code>add_post_meta($post_id, $meta_key, $meta_value, $unique)</code></p>

<p><strong><em>Params:</em></strong><br>
<code>int $post_id</code> - id поста<br>
<code>string $meta_key</code> - ключ<br>
<code>string|array $meta_value</code> - значення, масив буде серіалізований автоматично
<code>boolean $unique</code> - унікальність поля  </p>

<p><strong><em>Return:</em></strong><br>
int|boolean - id створеного поля або false.  </p>

<aside class="notice">
Для створення прихованого поля meta_key повинен починатися з `_` наприклад `_hidden_meta_key`
</aside>
<h3 id='update_post_meta'>update_post_meta</h3>
<p>Оновити дані поля для поста</p>

<p><code>update_post_meta( $post_id, $meta_key, $meta_value, $prev_value )</code></p>

<p><strong><em>Params:</em></strong><br>
<code>int $post_id</code> - id поста<br>
<code>string $meta_key</code> - ключ<br>
<code>mixed $meta_value</code> - значення<br>
<code>mixed $prev_value</code> - попереднє значення, параматр корисний коли існують декілька
значень з однинаковим ключем.</p>

<p><strong><em>Return:</em></strong><br>
int|boolean - id створеного поля якщо такого поля не існує, або true/false.  </p>
<h3 id='delete_post_meta'>delete_post_meta()</h3>
<p>Видалити поле</p>

<p><code>delete_post_meta($post_id, $meta_key, $meta_value)</code></p>

<p><strong><em>Params:</em></strong><br>
<code>int $post_id</code> - id поста<br>
<code>string $meta_key</code> - ключ<br>
<code>mixed $meta_value</code> - значення  </p>

<p><strong><em>Return:</em></strong><br>
boolean  </p>
<h3 id='get_post_custom'>get_post_custom()</h3>
<p>Отримати кастомні дані поста</p>

<p><code>get_post_custom($post_id)</code></p>

<p><strong><em>Params:</em></strong><br>
<code>int $post_id</code> - id поста  </p>

<p><strong><em>Return:</em></strong><br>
array - масив всіх полів поста</p>
<h3 id='get_post_custom_values'>get_post_custom_values()</h3>
<p>Отримати масив значень поста для одного поля</p>

<p><code>get_post_custom_values($key, $post_id)</code></p>

<p><strong><em>Params:</em></strong><br>
<code>string $key</code> - ключ поля<br>
<code>int $post_id</code> - id поста  </p>

<p><strong><em>Return:</em></strong><br>
array - масив значень для поля</p>
<h3 id='get_post_custom_keys'>get_post_custom_keys()</h3>
<p>Оримати ключі кастомних полів для поста</p>

<p><code>get_post_custom_keys($post_id)</code>  </p>

<p><strong><em>Params:</em></strong><br>
<code>int $post_id</code> - id поста  </p>

<p><strong><em>Return:</em></strong><br>
array - масив ключів</p>
<h2 id='hidden-custom-fields'>Hidden Custom Fields</h2>
<p>За замовчуванням метадані відображаються на сторінці поста, їх можна додавати змінювати та видаляти, 
для того щоб створити приховані мета дані, для самостійної обробки 
цих даних ключ повинен починатися з &#39;_&#39; напр &#39;_color&#39;</p>
<h2 id='meta-boxes'>Meta Boxes</h2>
<p>Мета бокси це окремі контейнери з яких складається сторінка (скрін).
Плагіни можуть розширювати сторінку редагування додаючи свої мета бокси. 
Мета бокси дуже гнучкі, користувач може обирати які з них відображати на сторінці та
змінювати їхні позиції.<br>
<a href="https://developer.wordpress.org/plugins/metadata/custom-meta-boxes/">Wordpress meta boxes docs</a>  </p>
<h3 id=''>Створення мета бокса</h3>
<blockquote>
<p>Додати мета бокс</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">function</span> <span class="nf">adding_custom_meta_boxes</span><span class="p">(</span> <span class="nv">$post_type</span><span class="p">,</span> <span class="nv">$post</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">add_meta_box</span><span class="p">(</span> 
        <span class="s1">'my-meta-box'</span><span class="p">,</span>
        <span class="nx">__</span><span class="p">(</span> <span class="s1">'My Meta Box'</span> <span class="p">),</span>
        <span class="s1">'render_custom_box_html'</span><span class="p">,</span>
        <span class="s1">'post'</span><span class="p">,</span>
        <span class="s1">'normal'</span><span class="p">,</span>
        <span class="s1">'default'</span>
    <span class="p">);</span>
<span class="p">}</span>
<span class="nx">add_action</span><span class="p">(</span> <span class="s1">'add_meta_boxes'</span><span class="p">,</span> <span class="s1">'adding_custom_meta_boxes'</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span> <span class="p">);</span>
</code></pre>
<blockquote>
<p>Додати мета бокс поста типу post</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">function</span> <span class="nf">adding_custom_meta_boxes</span><span class="p">(</span> <span class="nv">$post</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">add_meta_box</span><span class="p">(</span> 
        <span class="s1">'my-meta-box'</span><span class="p">,</span>
        <span class="nx">__</span><span class="p">(</span> <span class="s1">'My Meta Box'</span> <span class="p">),</span>
        <span class="s1">'render_custom_box_html'</span><span class="p">,</span>
        <span class="s1">'post'</span><span class="p">,</span>
        <span class="s1">'normal'</span><span class="p">,</span>
        <span class="s1">'default'</span>
    <span class="p">);</span>
<span class="p">}</span>
<span class="nx">add_action</span><span class="p">(</span> <span class="s1">'add_meta_boxes_post'</span><span class="p">,</span> <span class="s1">'adding_custom_meta_boxes'</span> <span class="p">);</span>
</code></pre>
<blockquote>
<p>render_custom_box_html</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">function</span> <span class="nf">render_custom_box_html</span><span class="p">(</span><span class="nv">$post</span><span class="p">)</span>
<span class="p">{</span>
    <span class="cp">?&gt;</span>
    <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"wporg_field"</span><span class="nt">&gt;</span>Description for this field<span class="nt">&lt;/label&gt;</span>
    <span class="nt">&lt;select</span> <span class="na">name=</span><span class="s">"wporg_field"</span> <span class="na">id=</span><span class="s">"wporg_field"</span> <span class="na">class=</span><span class="s">"postbox"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>Select something...<span class="nt">&lt;/option&gt;</span>
        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"something"</span><span class="nt">&gt;</span>Something<span class="nt">&lt;/option&gt;</span>
        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"else"</span><span class="nt">&gt;</span>Else<span class="nt">&lt;/option&gt;</span>
    <span class="nt">&lt;/select&gt;</span>
    <span class="cp">&lt;?php</span>
<span class="p">}</span>
</code></pre>
<p>Для створення метабокса потрібно додати action на <code>add_meta_boxes</code>.
Також для конкретного типу поста можна використовувати <code>add_meta_boxes_{post_type}</code></p>

<aside class="notice">
Мета бокси не повинні мати кнопки submit, 
поля мета боксів сабмітяться разом з формою
</aside>
<h3 id='-2'>Збереження даних</h3>
<blockquote>
<p>save data</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">function</span> <span class="nf">wporg_save_postdata</span><span class="p">(</span><span class="nv">$post_id</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">array_key_exists</span><span class="p">(</span><span class="s1">'wporg_field'</span><span class="p">,</span> <span class="nv">$_POST</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">update_post_meta</span><span class="p">(</span>
            <span class="nv">$post_id</span><span class="p">,</span>
            <span class="s1">'_wporg_meta_key'</span><span class="p">,</span>
            <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'wporg_field'</span><span class="p">]</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="nx">add_action</span><span class="p">(</span><span class="s1">'save_post'</span><span class="p">,</span> <span class="s1">'wporg_save_postdata'</span><span class="p">);</span>
</code></pre>
<p>Для збереження даних метабоксу потрібно зареєструвати action на <code>save_post</code>. 
Якщо потрібно записати дані в post_meta, можна використати функцію <code>update_post_meta</code></p>
<h3 id='add_meta_box'>add_meta_box()</h3>
<p>Функція додає мета бокс до скріна<br>
<code>add_meta_box( string $id, string $title, callable $callback, string|array|WP_Screen $screen = null, string $context = &#39;advanced&#39;, string $priority = &#39;default&#39;, array $callback_args = null )</code></p>

<p><strong><em>Params:</em></strong><br>
<code>string $id</code> - id мета бокса (використовується як html атрибут &#39;id&#39; )<br>
<code>string $title</code> - Title of the meta box<br>
<code>callable $callback</code> - Колбек для виводу контенту<br>
<code>string|array|WP_Screen $screen = null</code> - Скріни на яких показувати контент (такі як post_type, &#39;link&#39;, or &#39;comment&#39;). ID, WP_Screen або масив з id скрінів
<code>string $context = &#39;advanced&#39;</code> - Де відображати &#39;normal&#39;, &#39;side&#39;, та &#39;advanced&#39;<br>
<code>string $priority = &#39;default&#39;</code> - Пріоритет розташування (&#39;default&#39;, &#39;high&#39;, &#39;low&#39;).<br>
<code>array $callback_args = null</code> - Дані які передаються в колбек.  </p>
<h3 id='remove_meta_box'>remove_meta_box()</h3>
<p>Видалити мета бокс</p>

<p><code>remove_meta_box( string $id, string|array|WP_Screen $screen, string $context )</code></p>

<p><strong><em>Params:</em></strong><br>
<code>string $id</code> - id мета бокса (використовується як html атрибут &#39;id&#39; )<br>
<code>string|array|WP_Screen $screen = null</code> - Скріни на яких показувати контент (такі як post_type, &#39;link&#39;, or &#39;comment&#39;). ID, WP_Screen або масив з id скрінів.<br>
<code>string $context = &#39;advanced&#39;</code> - Де відображати &#39;normal&#39;, &#39;side&#39;, та &#39;advanced&#39;.  </p>
<h2 id='settings-api'>Settings API</h2>
<p>Settings API дозволяє напів автоматично створювати та обробляти сторінки налаштувань.
API дає можливість створювати сторінки, секції на сторінках та поля в секціях.</p>
<h3 id='register_settings'>register_settings()</h3>
<p>Зареєструвати налаштування і дані </p>

<p><code>register_setting( string $option_group, string $option_name, array $args = array() )</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $option_group</code> - Назва групи<br></li>
<li><code>string $option_name</code> - Назва налаштування<br></li>
<li><code>array $args = []</code> - Опис налаштування<br></li>
</ul>
<h3 id='unregister_setting'>unregister_setting()</h3>
<p>Відмінити реєстрацію налаштувань</p>

<p><code>unregister_setting( string $option_group, string $option_name, callable $deprecated = &#39;&#39; )</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $option_group</code> - Назва групи<br></li>
<li><code>string $option_name</code> - Назва налаштування<br></li>
<li><code>callable $deprecated</code> - Застарілий параметр</li>
</ul>
<h3 id='add_settings_section'>add_settings_section()</h3>
<p>додати нову секцію налаштувань</p>

<p><code>add_settings_section( string $id, string $title, callable $callback, string $page )</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $id</code> - Ідентифікатор секції</li>
<li><code>string $title</code> - Заголовок</li>
<li><code>callable $callback</code> - Колбек для виводу контенту секції (текст між заголовком та полями)</li>
<li><code>string $page</code> - Сторінка на якій будуть виводитись налаштування. Вбудовані сторінки
&#39;general&#39;, &#39;reading&#39;, &#39;writing&#39;, &#39;discussion&#39;, &#39;media&#39;. Також можна створити свою сторінку налаштувань <code>add_options_page()</code></li>
</ul>
<h3 id='add_settings_field'>add_settings_field()</h3>
<p><code>add_settings_field( string $id, string $title, callable $callback, string $page, string $section = &#39;default&#39;, array $args = array() )</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $id</code> - Ідентифікатор поля</li>
<li><code>string $title</code> - Лейбл поля</li>
<li><code>callable $callback</code> - Колбек для виводу поля</li>
<li><code>string $page</code> - Сторінка налаштувань</li>
<li><code>string $section = &#39;default&#39;</code> - Секція налаштувань</li>
<li><code>array $args = array()</code> - Додаткові дані які використовуються для виводу поля

<ul>
<li><code>label_for</code> -  Коли передано, поле буде огорнуто в <code>&lt;label&gt;</code> з цим атрибутом <code>for</code>.</li>
<li><code>class</code> - CSS клас який буде додато <code>&lt;tr&gt;</code> елемента при виводі.</li>
</ul></li>
</ul>
<h3 id='settings_fields'>settings_fields()</h3>
<p>Вивід <strong>nonce</strong>, <strong>action</strong> та <strong>option_page</strong> полів на сторінці налаштувань, які потрібні для безпеки та правильної обробки форми.</p>

<p><code>settings_fields( string $option_group )</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $option_group</code> - Назва групи налаштувань</li>
</ul>
<h3 id='do_settings_sections'>do_settings_sections()</h3>
<p>Вивести секції привязані до сторінки</p>

<p><code>do_settings_sections( string $page )</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $page</code> - slug сторінки</li>
</ul>
<h3 id='do_settings_fields'>do_settings_fields()</h3>
<p>Вивести поля для секції налаштувань</p>

<p><code>do_settings_fields( string $page, string $section )</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $page</code> - Slug сторінки</li>
<li><code>string $section</code> - Slug секції</li>
</ul>
<h3 id='add_settings_error'>add_settings_error()</h3>
<p>Зареєструвати помилку для сторінки налаштувань</p>

<p><code>add_settings_error( string $setting, string $code, string $message, string $type = &#39;error&#39; )</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $setting</code> - Slug налаштування</li>
<li><code>string $code</code> - Slug ідентифікатор помилки</li>
<li><code>string $message</code> - Повідомлення</li>
<li><code>string $type = &#39;error&#39;</code> - Тип помилки &#39;error&#39;(червоний) або &#39;updated&#39;(зелений)</li>
</ul>
<h3 id='get_settings_errors'>get_settings_errors()</h3>
<p>Отримати мопилки налаштувань</p>

<p><code>get_settings_errors( string $setting = &#39;&#39;, boolean $sanitize = false )</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $setting = &#39;&#39;</code> - Slug налаштувань</li>
<li><code>boolean $sanitize = false</code> - Очистити повідомлення</li>
</ul>
<h3 id='settings_errors'>settings_errors()</h3>
<p>Вивести повідомлення</p>

<p><code>settings_errors( string $setting = &#39;&#39;, bool $sanitize = false, bool $hide_on_update = false )</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $setting = &#39;&#39;</code> - Slug налаштування</li>
<li><code>bool $sanitize = false</code> - Очистити повідомлення</li>
<li><code>bool $hide_on_update = false</code> - Якщо true помилки будуть виводитись якщо сторінка вже була засабмічена</li>
</ul>
<h2 id='options-api'>Options API</h2>
<p>Options API дає можливість, зберігати, читати, оновлювати налаштування плагіну в БД.</p>
<h3 id='add_option'>add_option()</h3>
<p>Додати нову опцію</p>

<p><code>add_option(string $option, mixed $value = &#39;&#39;, string $deprecated = &#39;&#39;, string|bool $autoload = &#39;yes&#39;)</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $option</code> - Ключ</li>
<li><code>mixed $value = &#39;&#39;</code> - Значення</li>
<li><code>string $deprecated = &#39;&#39;</code> - Не використовується</li>
<li><code>string|bool $autoload = &#39;yes&#39;</code> - Загружати автоматично</li>
</ul>
<h3 id='add_site_option'>add_site_option()</h3>
<p>Додати нову опцію для поточного сайту</p>

<p><code>add_site_option(string $option, mixed $value)</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $option</code> - Ключ</li>
<li><code>mixed $value = &#39;&#39;</code> - Значення</li>
</ul>
<h3 id='get_option'>get_option()</h3>
<p>Отримати значення</p>

<p><code>get_option( string $option, mixed $default = false )</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $option</code> - Ключ</li>
<li><code>mixed $default = false</code> - Значення за замовчуванням</li>
</ul>
<h3 id='get_site_option'>get_site_option()</h3>
<p>Отримати значення для поточного сайту</p>

<p><code>get_site_option(string $option, mixed $default = false, bool $deprecated = true)</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $option</code> - Ключ</li>
<li><code>mixed $default = false</code> - Значення за замовчуванням</li>
<li><code>bool $deprecated = true</code> - Не викоритовується</li>
</ul>
<h3 id='update_option'>update_option()</h3>
<p>Оновити опцію</p>

<p><code>update_option( string $option, mixed $value, string|bool $autoload = null )</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $option</code> - Ключ</li>
<li><code>mixed $value</code> - Значення</li>
<li><code>string|bool $autoload = null</code> - Підгружати автоматично </li>
</ul>
<h3 id='update_site_option'>update_site_option()</h3>
<p>Оновити опцію для поточного сайту</p>

<p><code>update_site_option(string $option, mixed $value)</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $option</code> - Ключ</li>
<li><code>mixed $value</code> - Значення</li>
</ul>
<h3 id='delete_option'>delete_option()</h3>
<p>Видалити опцію</p>

<p><code>delete_option( string $option )</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $option</code> - Ключ</li>
</ul>
<h3 id='delete_site_option'>delete_site_option()</h3>
<p>Видалити опцію для поточного сайту</p>

<p><code>delete_site_option(string $option)</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $option</code> - Ключ</li>
</ul>
<h2 id='settings-page'>Settings page</h2>
<blockquote>
<p>Ініціалізація налаштувань</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="k">function</span> <span class="nf">premmerce_settings_init</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Зареєструвати налаштування "premmerce" page
</span>    <span class="nx">register_setting</span><span class="p">(</span> <span class="s1">'premmerce'</span><span class="p">,</span> <span class="s1">'premmerce_options'</span> <span class="p">);</span>

    <span class="c1">// Зареєструвати секцію на сторінці "premmerce"
</span>    <span class="nx">add_settings_section</span><span class="p">(</span>
        <span class="s1">'premmerce_section'</span><span class="p">,</span>
        <span class="s1">'Секція'</span><span class="p">,</span>
        <span class="s1">'premmerce_section_callback'</span><span class="p">,</span>
        <span class="s1">'premmerce'</span>
    <span class="p">);</span>

    <span class="c1">// Зареєструвати поле в секції "premmerce_section"
</span>    <span class="nx">add_settings_field</span><span class="p">(</span>
        <span class="s1">'premmerce_field_input'</span><span class="p">,</span>

        <span class="s1">'Input'</span><span class="p">,</span>
        <span class="s1">'premmerce_input_callback'</span><span class="p">,</span>
        <span class="s1">'premmerce'</span><span class="p">,</span>
        <span class="s1">'premmerce_section'</span><span class="p">,</span>
        <span class="p">[</span>
            <span class="s1">'label_for'</span> <span class="o">=&gt;</span> <span class="s1">'premmerce_field_input'</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">);</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">premmerce_section_callback</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="s2">"&lt;p&gt;Контент секції&lt;/p&gt;"</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">premmerce_input_callback</span><span class="p">(</span> <span class="nv">$args</span> <span class="p">)</span> <span class="p">{</span>

    <span class="nv">$option</span> <span class="o">=</span> <span class="nx">get_option</span><span class="p">(</span> <span class="s1">'premmerce_options'</span> <span class="p">)</span>
    <span class="cp">?&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"premmerce_options[</span><span class="cp">&lt;?=</span> <span class="nx">esc_attr</span><span class="p">(</span> <span class="nv">$args</span><span class="p">[</span><span class="s1">'label_for'</span><span class="p">]</span> <span class="p">);</span> <span class="cp">?&gt;</span><span class="s">]"</span>
           <span class="na">value=</span><span class="s">"</span><span class="cp">&lt;?=</span> <span class="nv">$option</span><span class="p">[</span> <span class="nv">$args</span><span class="p">[</span><span class="s1">'label_for'</span><span class="p">]</span> <span class="p">]</span> <span class="cp">?&gt;</span><span class="s">"</span><span class="nt">&gt;</span>
    <span class="cp">&lt;?php</span>
<span class="p">}</span>

<span class="sd">/**
 * Реєстрація premmerce_settings_init по хуку admin_init
 */</span>
<span class="nx">add_action</span><span class="p">(</span> <span class="s1">'admin_init'</span><span class="p">,</span> <span class="s1">'premmerce_settings_init'</span> <span class="p">);</span>

</code></pre>
<blockquote>
<p>Реєстрація та вивід сторінки налаштувань</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="k">function</span> <span class="nf">premmerce_options_page</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Додати меню верхнього рівня
</span>    <span class="nx">add_menu_page</span><span class="p">(</span>
        <span class="s1">'Premmerce settings'</span><span class="p">,</span>
        <span class="s1">'Premmerce settings'</span><span class="p">,</span>
        <span class="s1">'manage_options'</span><span class="p">,</span>
        <span class="s1">'premmerce-settings'</span><span class="p">,</span>
        <span class="s1">'premmerce_options_page_html'</span>
    <span class="p">);</span>
<span class="p">}</span>

<span class="sd">/**
 * Зареєструвати premmerce_options_page по хуку admin_menu
 */</span>
<span class="nx">add_action</span><span class="p">(</span> <span class="s1">'admin_menu'</span><span class="p">,</span> <span class="s1">'premmerce_options_page'</span> <span class="p">);</span>


<span class="k">function</span> <span class="nf">premmerce_options_page_html</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Перевірка прав доступу
</span>    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">current_user_can</span><span class="p">(</span> <span class="s1">'manage_options'</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Перевірити чи користувач засабмітив налаштування
</span>    <span class="c1">// Wordpress додає "settings-updated" до $_GET
</span>    <span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s1">'settings-updated'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Додати повідомлення "updated"
</span>        <span class="nx">add_settings_error</span><span class="p">(</span> <span class="s1">'premmerce_messages'</span><span class="p">,</span> <span class="s1">'premmerce_message'</span><span class="p">,</span> <span class="s1">'Settings Saved'</span><span class="p">,</span> <span class="s1">'updated'</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// Показати повідомлення повідомлення error/update
</span>    <span class="nx">settings_errors</span><span class="p">(</span> <span class="s1">'premmerce_messages'</span> <span class="p">);</span>

    <span class="cp">?&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"wrap"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;h1&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">esc_html</span><span class="p">(</span> <span class="nx">get_admin_page_title</span><span class="p">()</span> <span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/h1&gt;</span>
        <span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"options.php"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>
            <span class="cp">&lt;?php</span>
            <span class="c1">// Поля для безпеки для зареєстрованих налаштувань "premmerce"
</span>            <span class="nx">settings_fields</span><span class="p">(</span> <span class="s1">'premmerce'</span> <span class="p">);</span>

            <span class="c1">// Вивід секцій налаштувань та їх полів
</span>            <span class="nx">do_settings_sections</span><span class="p">(</span> <span class="s1">'premmerce'</span> <span class="p">);</span>

            <span class="c1">// Кнопка збереження
</span>            <span class="nx">submit_button</span><span class="p">(</span> <span class="s1">'Save Settings'</span> <span class="p">);</span>
            <span class="cp">?&gt;</span>
        <span class="nt">&lt;/form&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="cp">&lt;?php</span>
<span class="p">}</span>
</code></pre>
<p>Повний приклад створення сторінки налаштувань. 
Для створення сторінки налаштувань потрібно зареєструвати налаштування <code>register_setting</code> 
додати секції  <code>add_settings_section</code> та поля <code>add_settings_field</code> по хуку <code>admin_init</code>, 
додати сотрінку до меню та вивести налаштування за допомогою <code>settings_fields</code>, <code>do_settings_sections</code>
та <code>submit_button</code>, збереження налаштувань будуть оброблятися автоматично.</p>
<h2 id='shortcodes'>Shortcodes</h2>
<blockquote>
<p>Створення shortcode</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="k">function</span> <span class="nf">premmerce_init_shortcodes</span><span class="p">()</span> <span class="p">{</span>

    <span class="nx">add_shortcode</span><span class="p">(</span> <span class="s1">'h1'</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span> <span class="nv">$atts</span><span class="p">,</span> <span class="nv">$content</span> <span class="p">,</span> <span class="nv">$tag</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s2">"&lt;</span><span class="si">{</span><span class="nv">$tag</span><span class="si">}</span><span class="s2"> data-attribute='</span><span class="si">{</span><span class="nv">$atts</span><span class="p">[</span><span class="s1">'data'</span><span class="p">]</span><span class="si">}</span><span class="s2">'&gt;"</span> <span class="o">.</span> <span class="nv">$content</span> <span class="o">.</span> <span class="s2">"&lt;/</span><span class="si">{</span><span class="nv">$tag</span><span class="si">}</span><span class="s2">&gt;"</span><span class="p">;</span>
    <span class="p">}</span> <span class="p">);</span>


    <span class="nx">add_shortcode</span><span class="p">(</span><span class="s1">'image'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$atts</span><span class="p">){</span>

        <span class="c1">// Комбінація зі значеннямим за замовчуванням
</span>        <span class="nv">$atts</span> <span class="o">=</span> <span class="nx">shortcode_atts</span><span class="p">([</span>
            <span class="s1">'src'</span> <span class="o">=&gt;</span> <span class="kc">null</span>
        <span class="p">],</span> <span class="nv">$atts</span><span class="p">);</span>


        <span class="k">return</span> <span class="s2">"&lt;img src='</span><span class="si">{</span><span class="nv">$atts</span><span class="p">[</span><span class="s1">'src'</span><span class="p">]</span><span class="si">}</span><span class="s2">'&gt;"</span><span class="p">;</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="nx">add_action</span><span class="p">(</span> <span class="s1">'init'</span><span class="p">,</span> <span class="s1">'premmerce_init_shortcodes'</span> <span class="p">);</span>
</code></pre>
<blockquote>
<p>Використання всередині поста</p>
</blockquote>
<pre class="highlight plaintext"><code>//double
[h1 data="home"]HOOOOO[/h1]

//single
[image src="https://www.w3schools.com/css/paris.jpg"]
</code></pre>
<p>Викорестання php коду всередині контенту заборонене, shortcodes дають можливість 
створювати динамічний контент. Shortcodes - це макроси які дають можливість розширювати контент
наприклад, додати до поста галерею або  інший динамічний контент.
Wordpress надає API для створення шоткодів таких як <code>[gallery id=&quot;123&quot; size=&quot;medium&quot;]</code>
для реєстрації shortcode існує функція <code>add_shortcode</code>, куди передається тег, 
за яким викликатиметься shortcode та колбек який оброблятиме вивід shortcode. 
Після створення shortcode буде доступний для виклику всередині контенту(наприклад в описі поста)
<code>[tag]</code> або <code>[tag attr1=&quot;value1&quot; , attr2=&quot;value2&quot;]Some conetent[/tag]</code>. </p>

<p>Колбек для виводу шоткодів приймає три параметри:</p>

<ul>
<li>array $atts - Масив атрибутів переданих в шоткод</li>
<li>string $content = null - Контент всередині тегів</li>
<li>string $tag = null - Тег шоткоду</li>
</ul>
<h3 id='shortcodes-2'>Вбудовані shortcodes</h3>
<p>За замовчуванням в Wordpress існують такі shortcodes:</p>

<ul>
<li><code>[caption]</code></li>
<li><code>[gallery]</code></li>
<li><code>[audio]</code></li>
<li><code>[video]</code> </li>
<li><code>[playlist]</code></li>
<li><code>[embed]</code></li>
</ul>
<h3 id='add_shortcode'>add_shortcode()</h3>
<p>Створити shortcode</p>

<p><code>add_shortcode(string $tag, callable $func)</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $tag</code> - Тег</li>
<li><code>callable $func</code> - Колбек</li>
</ul>

<aside class="notice">
Рекомендується створювати shortcode всередині хука `init`
</aside>
<h3 id='remove_shortcode'>remove_shortcode()</h3>
<p>Видалити shortcode</p>

<p><code>remove_shortcode( string $tag )</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $tag</code> - Тег</li>
</ul>
<h3 id='shortcode_exists'>shortcode_exists()</h3>
<p>Перевірка чи shortcode існує</p>

<p><code>shortcode_exists(string $tag)</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $tag</code> - Тег</li>
</ul>
<h3 id='shortcode_atts'>shortcode_atts()</h3>
<p>Комбінує введені атрибути з заданими дефолтними значеннями</p>

<p><code>shortcode_atts( array $pairs, array $atts, string $shortcode = &#39;&#39; )</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>array $pairs</code> - Масив ключів та дефолтних значень</li>
<li><code>array $atts</code> - Атрибути ввндені користувачем</li>
<li><code>string $shortcode = &#39;&#39;</code> - Назва shortcode</li>
</ul>
<h3 id='do_shortcode'>do_shortcode()</h3>
<p>Викликати шорткод. Можна використовувати для виклику shortcode всередині php файлу.</p>

<p><code>do_shortcode(string $content, bool $ignore_html = false)</code></p>

<p><code>do_shortcode(&#39;[gallery]&#39;)</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $content</code> - Контент шорткоду</li>
<li><code>bool $ignore_html = false</code> Шорткоди всередині HTML будуть пропущені</li>
</ul>
<h2 id='taxonomies'>Taxonomies</h2>
<p>Таксономія це спосіб групувати елементи.
Наприклад для того щоб погрупувати пости по категоріях використовуються таксономії.
Інші приклади таксономій в Wordpress + Woocommerce:</p>

<ul>
<li>теги</li>
<li>категорії</li>
<li>атрибути</li>
<li>бренди</li>
</ul>

<p>При створеннні нової таксономії вона автоматично додається до меню.
На сторінці таксономії можна керувати термами (значеннями) таксономії (створювати, видаляти, редагувати).
Та до сторінки поста в адмінці додається вибір термів таксономії.</p>

<blockquote>
<p>Реєстрація таксономії</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">function</span> <span class="nf">post_group_init</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// create a new taxonomy
</span>    <span class="nx">register_taxonomy</span><span class="p">(</span>
        <span class="s1">'post_group'</span><span class="p">,</span>
        <span class="s1">'post'</span><span class="p">,</span>
        <span class="p">[</span>
            <span class="s1">'label'</span>        <span class="o">=&gt;</span> <span class="nx">__</span><span class="p">(</span> <span class="s1">'Post group'</span> <span class="p">),</span>
        <span class="p">]</span>
    <span class="p">);</span>
<span class="p">}</span>

<span class="nx">add_action</span><span class="p">(</span> <span class="s1">'init'</span><span class="p">,</span> <span class="s1">'post_group_init'</span> <span class="p">);</span>
</code></pre>
<blockquote>
<p>Запит постів по таксономії
<code>php
&lt;?php
$query = new WP_Query( array( &#39;post_group&#39; =&gt; &#39;archive&#39; ) );
</code></p>
</blockquote>
<h3 id='register_taxonomy'>register_taxonomy()</h3>
<p>Зареєструвати нову таксономію</p>

<p><code>register_taxonomy(string $taxonomy, $object_type, $args)</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $taxonomy</code> - Назва таксономії</li>
<li><code>$object_type</code> - Тип поста (вбудований або кастомний)</li>
<li><code>$args</code> - Аргументи (див. <a href="https://codex.wordpress.org/Function_Reference/register_taxonomy">register taxonomy</a>)</li>
</ul>
<h3 id='wp_set_object_terms'>wp_set_object_terms()</h3>
<p>Встановити терми для об&#39;єкта, замінить всі терми заданої таксономії для об&#39;єкта з переданим id.</p>

<p><code>wp_set_object_terms($object_id, $terms, $taxonomy, $append)</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>int $object_id</code> - id поста</li>
<li><code>array|int|string $terms</code> - slud, id терма або масив (slug або id)</li>
<li><code>array| string $taxonomy</code> - назва таксономії</li>
<li><code>boolean $append = false</code>- замінити терми якщо false, чи додати нові якщо true</li>
</ul>
<h3 id='get_terms'>get_terms()</h3>
<p>Отримати терми</p>

<p><code>get_terms(string|array $args = array(), array $deprecated = &#39;&#39;)</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string|array $args = array()</code> - Аргументи для запиту(див. <a href="https://developer.wordpress.org/reference/classes/wp_term_query/__construct/">WP_Term_Query::__construct()</a> )</li>
<li><code>array $deprecated = &#39;&#39;</code> - Для підтримки старого коду</li>
</ul>
<h2 id='users'>Users</h2>
<blockquote>
<p>Створення користувача</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="c1">// Перевірити чи не зайняте ім'я користувача
</span><span class="nv">$user_id</span> <span class="o">=</span> <span class="nx">username_exists</span><span class="p">(</span><span class="nv">$user_name</span><span class="p">);</span>

<span class="c1">// Перевірити чи email не належить існуючому користувачу
</span><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$user_id</span> <span class="o">&amp;&amp;</span> <span class="nx">email_exists</span><span class="p">(</span><span class="nv">$user_email</span><span class="p">)</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
<span class="c1">// Згенерити пароль
</span>    <span class="nv">$random_password</span> <span class="o">=</span> <span class="nx">wp_generate_password</span><span class="p">(</span>
        <span class="nv">$length</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span>
        <span class="nv">$include_standard_special_chars</span> <span class="o">=</span> <span class="kc">false</span>
    <span class="p">);</span>
<span class="c1">// створити користувача
</span>    <span class="nv">$user_id</span> <span class="o">=</span> <span class="nx">wp_create_user</span><span class="p">(</span>
        <span class="nv">$user_name</span><span class="p">,</span>
        <span class="nv">$random_password</span><span class="p">,</span>
        <span class="nv">$user_email</span>
    <span class="p">);</span>
<span class="p">}</span>
</code></pre>
<blockquote>
<p>Оновлення користувача</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="nv">$user_id</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

<span class="nv">$website</span> <span class="o">=</span> <span class="s1">'https://premmerce.com'</span><span class="p">;</span>

<span class="nv">$user_id</span> <span class="o">=</span> <span class="nx">wp_update_user</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="s1">'ID'</span>       <span class="o">=&gt;</span> <span class="nv">$user_id</span><span class="p">,</span>
        <span class="s1">'user_url'</span> <span class="o">=&gt;</span> <span class="nv">$website</span><span class="p">,</span>
    <span class="p">]</span>
<span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">is_wp_error</span><span class="p">(</span><span class="nv">$user_id</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">// error
</span><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// success
</span><span class="p">}</span>
</code></pre><h3 id='wp_create_user'>wp_create_user()</h3>
<p>Створити нового користувача  </p>

<p><code>wp_create_user(string $username, string $password, string $email = &#39;&#39;)</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $username</code> - Ім&#39;я</li>
<li><code>string $password</code> - Пароль</li>
<li><code>string $email = &#39;&#39;</code> - Email</li>
</ul>

<p><strong><em>Return:</em></strong></p>

<ul>
<li><code>int|WP_Error</code> - Id створеного користувача або об&#39;єкт WP_Error, 
якщо користувач не може бути створений</li>
</ul>
<h3 id='wp_insert_user'>wp_insert_user()</h3>
<p>Записати користувача в БД</p>

<p><code>wp_insert_user(array|object|WP_User $userdata)</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>array|object|WP_User $userdata</code> - Дані користувача

<ul>
<li><code>ID</code> - ID користувача, якщо передано користувача буде оновлено.</li>
<li><code>user_pass</code> - пароль.</li>
<li><code>user_login</code> - Username для авторизації.</li>
<li><code>user_nicename</code> - URL-friendly ім&#39;я користувача.</li>
<li><code>user_url</code> - URL.</li>
<li><code>user_email</code> - Email.</li>
<li><code>display_name</code> - Ім&#39;я для виводу. Default username.</li>
<li><code>nickname</code> - Нікнейм. Default username.</li>
<li><code>first_name</code> - Ім&#39;я.</li>
<li><code>last_name</code> - По батькові.</li>
<li><code>description</code> - Біографія користувача.</li>
<li><code>rich_editing</code> - Включити rich-editor для користувача.</li>
<li><code>comment_shortcuts</code> - Включити keyboard shortcuts для модерації коментів. Default false.</li>
<li><code>admin_color</code> - кольорова схема адмінки для користувача. Default &#39;fresh&#39;.</li>
<li><code>use_ssl</code> - Користувач повинем заходити в адмінку через https. Default false.</li>
<li><code>user_registered</code> - Дата реєстрації. Формат is &#39;Y-m-d H:i:s&#39;.</li>
<li><code>show_admin_bar_front</code> - Чи відображати адмін панель на фронті</li>
<li><code>role</code> - роль користувача.</li>
<li><code>locale</code> - локаль користувача.</li>
</ul></li>
</ul>
<h3 id='wp_update_user'>wp_update_user()</h3>
<p>Оновити користувача</p>

<p><code>wp_update_user(array|object|WP_User $userdata)</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>array|object|WP_User</code> - дані користувача</li>
</ul>
<h3 id='wp_delete_user'>wp_delete_user()</h3>
<p>Видалити користувача та мета дані</p>

<p><code>wp_delete_user(int $id, int $reassign = null)</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>int $id</code> - id користувача</li>
<li><code>int $reassign</code> - id користувача на якого переасайнити пости ітп.</li>
</ul>
<h2 id='user-meta'>User Meta</h2>
<p>Користувачі як і пости можуть мати свої мета дані (кастомні поля) </p>
<h3 id='add_user_meta'>add_user_meta()</h3>
<p>Додати мета поле для користувача</p>

<p><code>add_user_meta(int $user_id, string $meta_key, mixed $meta_value, bool $unique = false)</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>int $user_id</code> - id</li>
<li><code>string $meta_key</code> - ключ</li>
<li><code>mixed $meta_value</code> - значення</li>
<li><code>bool $unique = false</code> - Чи такий самий ключ не повинен додаватись</li>
</ul>
<h3 id='update_user_meta'>update_user_meta()</h3>
<p>Оновити метадані користувача</p>

<p><code>update_user_meta(int $user_id, string $meta_key, mixed $meta_value, mixed $prev_value = &#39;&#39;)</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>int $user_id</code> - Id</li>
<li><code>string $meta_key</code> - Ключ<br></li>
<li><code>mixed $meta_value</code> - Значення</li>
<li><code>mixed $prev_value = &#39;&#39;</code> - Попереднє значення, для перевірки перед видаленням</li>
</ul>

<p><strong><em>Return:</em></strong></p>

<ul>
<li><code>int|bool</code> - Мета id якщо ключ не існує, true - при оновленні існуючого, false при невдачі</li>
</ul>
<h3 id='delete_user_meta'>delete_user_meta()</h3>
<p>Видалити мета дані користувача</p>

<p><code>delete_user_meta(int $user_id, string $meta_key, mixed $meta_value = &#39;&#39;)</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>int $user_id</code> - id</li>
<li><code>string $meta_key</code> - Ключ</li>
<li><code>mixed $meta_value = &#39;&#39;</code> - Значення</li>
</ul>
<h3 id='get_user_meta'>get_user_meta()</h3>
<p>Отримати мета дані користувача</p>

<p><code>get_user_meta(int $user_id, string $key = &#39;&#39;, bool $single = false)</code></p>

<p><strong><em>Params</em></strong></p>

<ul>
<li><code>int $user_id</code> - id користувача</li>
<li><code>string $key = &#39;&#39;</code> - ключ, за замовчуванням дістаються дані для всіх ключів</li>
<li><code>bool $single = false</code> - повернути одне значення.</li>
</ul>
<h2 id='roles-and-capabilities'>Roles and Capabilities</h2>
<p><a href="https://codex.wordpress.org/Roles_and_Capabilities">Roles and Capabilities</a><br>
В Wordpress існують такі поняття як roles та capabilities</p>

<ul>
<li>roles - ролі користувачів (Administrator, Editor, Customer)</li>
<li>capabilities - права для ролі (активація плагіну, видалення поста)</li>
</ul>

<p>Отримати список всіх ролей та прав можна через ф-ію <code>wp_roles()</code></p>

<blockquote>
<p>current_user_can</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">if</span> <span class="p">(</span> <span class="nx">current_user_can</span><span class="p">(</span> <span class="nv">$capability</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="c1">//код
</span><span class="p">}</span>

<span class="c1">// Перевірка для конкретного поста
</span><span class="nx">current_user_can</span><span class="p">(</span> <span class="s1">'edit_post'</span><span class="p">,</span> <span class="nv">$post_id</span> <span class="p">);</span>
</code></pre>
<blockquote>
<p>author_can</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">if</span> <span class="p">(</span> <span class="nx">author_can</span><span class="p">(</span> <span class="nv">$post</span><span class="p">,</span> <span class="nv">$capability</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="c1">//код
</span><span class="p">}</span>
</code></pre>
<blockquote>
<p>add_role</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="c1">// Створення ролі та перевірка прав:
</span><span class="nx">add_role</span><span class="p">(</span> <span class="nv">$role_name</span><span class="p">,</span> <span class="nv">$display_name</span><span class="p">,</span> <span class="nv">$capabilities</span> <span class="p">);</span>

<span class="nx">add_role</span><span class="p">(</span> <span class="s1">'photo_uploader'</span><span class="p">,</span> <span class="s1">'Photo Uploader'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'organize_gallery'</span> <span class="p">)</span> <span class="p">);</span>
<span class="k">if</span> <span class="p">(</span> <span class="nx">current_user_can</span><span class="p">(</span> <span class="s1">'organize_gallery'</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="c1">// код
</span><span class="p">}</span>
</code></pre>
<blockquote>
<p>remove_role</p>
</blockquote>
<pre class="highlight php tab-php"><code>remove_role( 'photo_uploader' );
</code></pre><h3 id='functions'>Functions:</h3>
<p><code>current_user_can(string $capability, int $object_id) : boolean</code><br>
Перевірка прав для поточного користувача</p>

<p><code>user_can(    int|object $user, string $capability) : boolean</code><br>
Перевірка прав для користувача  </p>

<p><code>author_can( object|int $post,string $capability ) : boolean</code><br>
Перевірка прав для автора поста   </p>

<p><code>add_role( string $role_name, string $display_name, array $capabilities ) : WP_Role|null</code><br>
Додати роль  </p>

<p><code>remove_role( $role_name )</code><br>
Видалити роль  </p>
<h3 id='wp_role'>WP_Role</h3>
<blockquote>
<p>WP_Role</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="c1">// get the the role object
</span><span class="nv">$role_object</span> <span class="o">=</span> <span class="nx">get_role</span><span class="p">(</span> <span class="nv">$role_name</span> <span class="p">);</span>

<span class="c1">// add $cap capability to this role object
</span><span class="nv">$role_object</span><span class="o">-&gt;</span><span class="na">add_cap</span><span class="p">(</span> <span class="nv">$capability_name</span> <span class="p">);</span>

<span class="c1">// remove $cap capability from this role object
</span><span class="nv">$role_object</span><span class="o">-&gt;</span><span class="na">remove_cap</span><span class="p">(</span> <span class="nv">$capability_name</span> <span class="p">);</span>
</code></pre>
<p>Це клас який представляє роль у вигляді об&#39;єкту і дозволяє проводити маніпуляції з правами.</p>

<blockquote>
<p>WP_User</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="c1">// get user by user ID
</span><span class="nv">$user</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_User</span><span class="p">(</span> <span class="nv">$id</span> <span class="p">);</span>

<span class="c1">// or get user by username
</span><span class="nv">$user</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_User</span><span class="p">(</span> <span class="kc">null</span><span class="p">,</span> <span class="nv">$name</span> <span class="p">);</span>

<span class="nv">$user</span><span class="o">-&gt;</span><span class="na">add_role</span><span class="p">(</span> <span class="nv">$role_name</span> <span class="p">);</span>
<span class="nv">$user</span><span class="o">-&gt;</span><span class="na">remove_role</span><span class="p">(</span> <span class="nv">$role_name</span> <span class="p">);</span>
<span class="nv">$user</span><span class="o">-&gt;</span><span class="na">set_role</span><span class="p">(</span> <span class="nv">$role_name</span> <span class="p">);</span>

</code></pre><h3 id='wp_user'>WP_User</h3>
<blockquote>
<p>Маніпуляція з правами</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="c1">// check whether the user has a certain capability or role name
</span><span class="k">if</span> <span class="p">(</span> <span class="nv">$user</span><span class="o">-&gt;</span><span class="na">has_cap</span><span class="p">(</span> <span class="nv">$cap_name</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
<span class="c1">// do something
</span><span class="p">}</span>

<span class="c1">// add a capability to the user and grant access to that capability
</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">add_cap</span><span class="p">(</span> <span class="nv">$cap_name</span> <span class="p">);</span>

<span class="c1">// remove a capability from the user
</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">remove_cap</span><span class="p">(</span> <span class="nv">$cap_name</span> <span class="p">);</span>

<span class="c1">// remove all capabilities from the user
</span><span class="nv">$user</span><span class="o">-&gt;</span><span class="na">remove_all_caps</span><span class="p">();</span>
</code></pre>
<p>Клас дозволяє керувати ролями та правами для конкретного користувача</p>
<h2 id='widgets'>Widgets</h2>
<blockquote>
<p>Клас віджету</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span> 

<span class="k">class</span> <span class="nc">My_Widget</span> <span class="k">extends</span> <span class="nx">WP_Widget</span> <span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">()</span> <span class="p">{</span>

        <span class="k">parent</span><span class="o">::</span><span class="na">__construct</span><span class="p">(</span>
            <span class="s1">'premmerce_widget'</span><span class="p">,</span>  <span class="c1">// Base ID
</span>            <span class="s1">'Some widget'</span>   <span class="c1">// Name
</span>        <span class="p">);</span>

    <span class="p">}</span>


    <span class="c1">// Вивід віджету на фронт
</span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">widget</span><span class="p">(</span> <span class="nv">$args</span><span class="p">,</span> <span class="nv">$instance</span> <span class="p">)</span> <span class="p">{</span>

        <span class="k">echo</span> <span class="nv">$args</span><span class="p">[</span><span class="s1">'before_widget'</span><span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$instance</span><span class="p">[</span><span class="s1">'title'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">echo</span> <span class="nv">$args</span><span class="p">[</span><span class="s1">'before_title'</span><span class="p">]</span> <span class="o">.</span> <span class="nx">apply_filters</span><span class="p">(</span> <span class="s1">'widget_title'</span><span class="p">,</span> <span class="nv">$instance</span><span class="p">[</span><span class="s1">'title'</span><span class="p">]</span> <span class="p">)</span> <span class="o">.</span> <span class="nv">$args</span><span class="p">[</span><span class="s1">'after_title'</span><span class="p">];</span>
        <span class="p">}</span>

        <span class="k">echo</span> <span class="s1">'&lt;div class="textwidget"&gt;'</span><span class="p">;</span>

        <span class="k">echo</span> <span class="nx">esc_html__</span><span class="p">(</span> <span class="nv">$instance</span><span class="p">[</span><span class="s1">'text'</span><span class="p">],</span> <span class="s1">'text_domain'</span> <span class="p">);</span>

        <span class="k">echo</span> <span class="s1">'&lt;/div&gt;'</span><span class="p">;</span>

        <span class="k">echo</span> <span class="nv">$args</span><span class="p">[</span><span class="s1">'after_widget'</span><span class="p">];</span>

    <span class="p">}</span>

    <span class="c1">// Форма налаштувань віджета
</span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">form</span><span class="p">(</span> <span class="nv">$instance</span> <span class="p">)</span> <span class="p">{</span>

        <span class="nv">$title</span> <span class="o">=</span> <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$instance</span><span class="p">[</span><span class="s1">'title'</span><span class="p">]</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">$instance</span><span class="p">[</span><span class="s1">'title'</span><span class="p">]</span> <span class="o">:</span> <span class="nx">esc_html__</span><span class="p">(</span> <span class="s1">''</span><span class="p">,</span> <span class="s1">'text_domain'</span> <span class="p">);</span>
        <span class="nv">$text</span> <span class="o">=</span> <span class="o">!</span> <span class="k">empty</span><span class="p">(</span> <span class="nv">$instance</span><span class="p">[</span><span class="s1">'text'</span><span class="p">]</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">$instance</span><span class="p">[</span><span class="s1">'text'</span><span class="p">]</span> <span class="o">:</span> <span class="nx">esc_html__</span><span class="p">(</span> <span class="s1">''</span><span class="p">,</span> <span class="s1">'text_domain'</span> <span class="p">);</span>
        <span class="cp">?&gt;</span>
        <span class="nt">&lt;p&gt;</span>
            <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">esc_attr</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get_field_id</span><span class="p">(</span> <span class="s1">'title'</span> <span class="p">)</span> <span class="p">);</span> <span class="cp">?&gt;</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">&lt;?php</span> <span class="nx">esc_attr_e</span><span class="p">(</span> <span class="s1">'Title:'</span><span class="p">,</span> <span class="s1">'text_domain'</span> <span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/label&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">"widefat"</span> <span class="na">id=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">esc_attr</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get_field_id</span><span class="p">(</span> <span class="s1">'title'</span> <span class="p">)</span> <span class="p">);</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="na">name=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">esc_attr</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get_field_name</span><span class="p">(</span> <span class="s1">'title'</span> <span class="p">)</span> <span class="p">);</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">value=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">esc_attr</span><span class="p">(</span> <span class="nv">$title</span> <span class="p">);</span> <span class="cp">?&gt;</span><span class="s">"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;p&gt;</span>
            <span class="nt">&lt;textarea</span> <span class="na">class=</span><span class="s">"widefat"</span> <span class="na">id=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">esc_attr</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get_field_id</span><span class="p">(</span> <span class="s1">'text'</span> <span class="p">)</span> <span class="p">);</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="na">name=</span><span class="s">"</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">esc_attr</span><span class="p">(</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get_field_name</span><span class="p">(</span> <span class="s1">'text'</span> <span class="p">)</span> <span class="p">);</span> <span class="cp">?&gt;</span><span class="s">"</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">cols=</span><span class="s">"30"</span> <span class="na">rows=</span><span class="s">"10"</span><span class="nt">&gt;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">esc_attr</span><span class="p">(</span> <span class="nv">$text</span> <span class="p">);</span> <span class="cp">?&gt;</span><span class="nt">&lt;/textarea&gt;</span>
        <span class="nt">&lt;/p&gt;</span>
        <span class="cp">&lt;?php</span>

    <span class="p">}</span>

    <span class="c1">// Обробка форми віджета
</span>    <span class="k">public</span> <span class="k">function</span> <span class="nf">update</span><span class="p">(</span> <span class="nv">$new_instance</span><span class="p">,</span> <span class="nv">$old_instance</span> <span class="p">)</span> <span class="p">{</span>

        <span class="nv">$instance</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

        <span class="nv">$instance</span><span class="p">[</span><span class="s1">'title'</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span> <span class="nv">$new_instance</span><span class="p">[</span><span class="s1">'title'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="o">?</span> <span class="nb">strip_tags</span><span class="p">(</span> <span class="nv">$new_instance</span><span class="p">[</span><span class="s1">'title'</span><span class="p">]</span> <span class="p">)</span> <span class="o">:</span> <span class="s1">''</span><span class="p">;</span>
        <span class="nv">$instance</span><span class="p">[</span><span class="s1">'text'</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span> <span class="o">!</span><span class="k">empty</span><span class="p">(</span> <span class="nv">$new_instance</span><span class="p">[</span><span class="s1">'text'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="o">?</span> <span class="nv">$new_instance</span><span class="p">[</span><span class="s1">'text'</span><span class="p">]</span> <span class="o">:</span> <span class="s1">''</span><span class="p">;</span>

        <span class="k">return</span> <span class="nv">$instance</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span>

<span class="nx">add_action</span><span class="p">(</span> <span class="s1">'widgets_init'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">register_widget</span><span class="p">(</span> <span class="k">new</span> <span class="nx">My_Widget</span><span class="p">()</span> <span class="p">);</span>
<span class="p">});</span>

</code></pre>
<p>Віджети дозволяють додавати контент та різні фічі в сайдбар 
()місця для віджетів визначені в шблоні). Це дає можливість користувачу швидко 
кастомізувати свій сайт.</p>

<p>Віджети це об&#39;єкти php які виводять певний HTML код. При створенні та реєстрації нового віджету 
від зявиться в адмін панелі і буде доступний для виводу на фронт.</p>

<p>Для того щоб створити віджет потрібно створити клас який наслідується від WP_Widget</p>

<p>В класі віджету потрібно реалізувати наступні методи:</p>

<ul>
<li><code>__construct</code> - ініціалізація, встановлення description, name</li>
<li><code>widget</code> - вивід віджету та фронті</li>
<li><code>form</code> - форма налаштувань віджету</li>
<li><code>update</code> - збереження налаштувань віджету</li>
</ul>

<aside class="notice">
Віджети потрібно додавати по хуку `widgets_init`
</aside>

<p><a href="https://developer.wordpress.org/themes/functionality/widgets/">Wordpress widgets doc</a></p>
<h2 id='wpdb'>WPDB</h2>
<blockquote>
<p>get_var</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="nv">$user_count</span> <span class="o">=</span> <span class="nv">$wpdb</span><span class="o">-&gt;</span><span class="na">get_var</span><span class="p">(</span> <span class="s2">"SELECT COUNT(*) FROM </span><span class="nv">$wpdb-&gt;users</span><span class="s2">"</span> <span class="p">);</span>
<span class="k">echo</span> <span class="s2">"&lt;p&gt;User count is </span><span class="si">{</span><span class="nv">$user_count</span><span class="si">}</span><span class="s2">&lt;/p&gt;"</span><span class="p">;</span>
</code></pre>
<blockquote>
<p>get_row</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">global</span> <span class="nv">$wpdb</span><span class="p">;</span>

<span class="c1">//об'єкт
</span><span class="nv">$link</span> <span class="o">=</span> <span class="nv">$wpdb</span><span class="o">-&gt;</span><span class="na">get_row</span><span class="p">(</span> <span class="s2">"SELECT * FROM </span><span class="nv">$wpdb-&gt;links</span><span class="s2"> WHERE link_id = 10"</span> <span class="p">);</span>
<span class="k">echo</span> <span class="nv">$link</span><span class="o">-&gt;</span><span class="na">link_id</span><span class="p">;</span> <span class="c1">//"10"
</span>
<span class="c1">//асоціативний масив
</span><span class="nv">$link</span> <span class="o">=</span> <span class="nv">$wpdb</span><span class="o">-&gt;</span><span class="na">get_row</span><span class="p">(</span> <span class="s2">"SELECT * FROM </span><span class="nv">$wpdb-&gt;links</span><span class="s2"> WHERE link_id = 10"</span><span class="p">,</span> <span class="nx">ARRAY_A</span> <span class="p">);</span>
<span class="k">echo</span> <span class="nv">$link</span><span class="p">[</span><span class="s1">'link_id'</span><span class="p">];</span> <span class="c1">//"10"
</span>
<span class="c1">//масив
</span><span class="nv">$link</span> <span class="o">=</span> <span class="nv">$wpdb</span><span class="o">-&gt;</span><span class="na">get_row</span><span class="p">(</span> <span class="s2">"SELECT * FROM </span><span class="nv">$wpdb-&gt;links</span><span class="s2"> WHERE link_id = 10"</span><span class="p">,</span> <span class="nx">ARRAY_N</span> <span class="p">);</span>
<span class="k">echo</span> <span class="nv">$link</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span> <span class="c1">//"10"
</span>
<span class="c1">//перевірка чи є результат
</span><span class="k">if</span> <span class="p">(</span> <span class="kc">null</span> <span class="o">!==</span> <span class="nv">$link</span> <span class="p">)</span> <span class="p">{</span>
  <span class="c1">// запис знайдений
</span><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="c1">// не знайдено
</span><span class="p">}</span>
</code></pre>
<blockquote>
<p>get_results</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">global</span> <span class="nv">$wpdb</span><span class="p">;</span>
<span class="nv">$fives_drafts</span> <span class="o">=</span> <span class="nv">$wpdb</span><span class="o">-&gt;</span><span class="na">get_results</span><span class="p">(</span> 
    <span class="s2">"
    SELECT ID, post_title 
    FROM </span><span class="nv">$wpdb-&gt;posts</span><span class="s2">
    WHERE post_status = 'draft' 
        AND post_author = 5
    "</span>
<span class="p">);</span>

<span class="k">foreach</span> <span class="p">(</span> <span class="nv">$fives_drafts</span> <span class="k">as</span> <span class="nv">$fives_draft</span> <span class="p">)</span> 
<span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$fives_drafts</span><span class="o">-&gt;</span><span class="na">post_title</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<blockquote>
<p>insert</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">global</span> <span class="nv">$wpdb</span><span class="p">;</span>

<span class="nv">$wpdb</span><span class="o">-&gt;</span><span class="na">insert</span><span class="p">(</span> 
    <span class="s1">'table'</span><span class="p">,</span> 
    <span class="k">array</span><span class="p">(</span> 
        <span class="s1">'column1'</span> <span class="o">=&gt;</span> <span class="s1">'value1'</span><span class="p">,</span> 
        <span class="s1">'column2'</span> <span class="o">=&gt;</span> <span class="mi">123</span> 
    <span class="p">),</span> 
    <span class="k">array</span><span class="p">(</span> 
        <span class="s1">'%s'</span><span class="p">,</span> 
        <span class="s1">'%d'</span> 
    <span class="p">)</span> 
<span class="p">);</span>

<span class="c1">//ід вставленого значення
</span><span class="nv">$id</span> <span class="o">=</span> <span class="nv">$wpdb</span><span class="o">-&gt;</span><span class="na">insert_id</span><span class="p">;</span>
</code></pre>
<blockquote>
<p>update</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">global</span> <span class="nv">$wpdb</span><span class="p">;</span>

<span class="nv">$wpdb</span><span class="o">-&gt;</span><span class="na">update</span><span class="p">(</span> 
    <span class="s1">'table'</span><span class="p">,</span> 
    <span class="k">array</span><span class="p">(</span> 
        <span class="s1">'column1'</span> <span class="o">=&gt;</span> <span class="s1">'value1'</span><span class="p">,</span>  <span class="c1">// string
</span>        <span class="s1">'column2'</span> <span class="o">=&gt;</span> <span class="s1">'value2'</span>   <span class="c1">// integer (number) 
</span>    <span class="p">),</span> 
    <span class="k">array</span><span class="p">(</span> <span class="s1">'ID'</span> <span class="o">=&gt;</span> <span class="mi">1</span> <span class="p">),</span> 
    <span class="k">array</span><span class="p">(</span> 
        <span class="s1">'%s'</span><span class="p">,</span>   <span class="c1">// value1
</span>        <span class="s1">'%d'</span>    <span class="c1">// value2
</span>    <span class="p">),</span> 
    <span class="k">array</span><span class="p">(</span> <span class="s1">'%d'</span> <span class="p">)</span> 
<span class="p">);</span>
</code></pre>
<blockquote>
<p>delete</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">global</span> <span class="nv">$wpdb</span><span class="p">;</span>

<span class="nv">$wpdb</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span> <span class="s1">'table'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'ID'</span> <span class="o">=&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">);</span>

<span class="c1">// З форматуванням
</span><span class="nv">$wpdb</span><span class="o">-&gt;</span><span class="na">delete</span><span class="p">(</span> <span class="s1">'table'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'ID'</span> <span class="o">=&gt;</span> <span class="mi">1</span> <span class="p">),</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'%d'</span> <span class="p">)</span> <span class="p">);</span>
</code></pre>
<blockquote>
<p>query</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">global</span> <span class="nv">$wpdb</span><span class="p">;</span>

<span class="nv">$wpdb</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span> 
    <span class="c1">//підготовлений запит
</span>    <span class="nv">$wpdb</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span> 
        <span class="s2">"
                DELETE FROM </span><span class="nv">$wpdb-&gt;postmeta</span><span class="s2">
         WHERE post_id = %d
         AND meta_key = %s
        "</span><span class="p">,</span>
            <span class="mi">13</span><span class="p">,</span> <span class="s1">'gargle'</span> 
        <span class="p">)</span>
<span class="p">);</span>
</code></pre>
<blockquote>
<p>prepare</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">global</span> <span class="nv">$wpdb</span><span class="p">;</span>

<span class="nv">$metakey</span>    <span class="o">=</span> <span class="s2">"Harriet's Adages"</span><span class="p">;</span>
<span class="nv">$metavalue</span>  <span class="o">=</span> <span class="s2">"WordPress' database interface is like Sunday Morning: Easy."</span><span class="p">;</span>

<span class="nv">$wpdb</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span> <span class="nv">$wpdb</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span> 
    <span class="s2">"
        INSERT INTO </span><span class="nv">$wpdb-&gt;postmeta</span><span class="s2">
        ( post_id, meta_key, meta_value )
        VALUES ( %d, %s, %s )
    "</span><span class="p">,</span> 
        <span class="mi">10</span><span class="p">,</span> 
    <span class="nv">$metakey</span><span class="p">,</span> 
    <span class="nv">$metavalue</span> 
<span class="p">)</span> <span class="p">);</span>
</code></pre>
<p>WPDB - Це об&#39;єкт для абстракції доступу до БД</p>

<p><a href="https://developer.wordpress.org/reference/classes/wpdb/">Code reference</a></p>

<p>$wpdb - доступний як глобальна змінна і його можна використовувати в будь якій частині коду.</p>

<aside class="warning">
    Назву таблиці в запитах необхідно брати з об'єкту $wpdb для вбудованих таблиць (пр. $wpdb->posts), 
    та `$wpdb->prefix . 'table_name'` для кастомних таблиць
</aside>
<h3 id='get_var'>get_var()</h3>
<p>Отримати одну змінну з БД</p>

<p><code>$wpdb-&gt;get_var( $query, $column_offset, $row_offset )</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $query</code> - SQL</li>
<li><code>int $column_offset = 0</code> - номер колонки</li>
<li><code>int $row_offset = 0</code> - номер рядка</li>
</ul>
<h3 id='get_row'>get_row()</h3>
<p>Отримати рядок</p>

<p><code>$wpdb-&gt;get_row($query, $output_type, $row_offset)</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $query</code> - SQL</li>
<li><code>string $output_type</code> - тип який буде повернено, одна з констант:

<ul>
<li>OBJECT - об&#39;єкт.</li>
<li>ARRAY_A - асоціативний масив.</li>
<li>ARRAY_N - нумерованиий масив.</li>
</ul></li>
<li><code>int $row_offset</code> - номер колонки</li>
</ul>
<h3 id='get_col'>get_col()</h3>
<p>Отримати колонку</p>

<p><code>$wpdb-&gt;get_col($query, $column_offset)</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $query</code> - SQL</li>
<li><code>int $column_offset = 0</code> - номер колонки</li>
</ul>
<h3 id='get_results'>get_results()</h3>
<p>Отримати всі дані</p>

<p><code>$wpdb-&gt;get_results($query, $output_type)</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $query</code> - SQL</li>
<li><code>string $output_type</code> - тип який буде повернено, одна з констант:

<ul>
<li>OBJECT - масив об&#39;єктів.</li>
<li>OBJECT_K - масив об&#39;єктів з ключами з першої колонки.</li>
<li>ARRAY_A - масив асоціативних масивів.</li>
<li>ARRAY_N - масив нумерованиич масивів.</li>
</ul></li>
</ul>
<h3 id='insert'>insert()</h3>
<p>Вставити рядок в БД</p>

<p><code>$wpdb-&gt;insert($table, $data, $format)</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $table</code> - таблиця</li>
<li><code>array $data</code> - дані для вставки (колонка=&gt;значення)</li>
<li><code>array|string $format = null</code> - формат</li>
</ul>
<h3 id='replace'>replace()</h3>
<p>Замінити рядок якщо такий існує, або створити новий</p>

<p><code>$wpdb-&gt;replace( $table, $data, $format )</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $table</code> - таблиця</li>
<li><code>array $data</code> - дані для вставки (колонка=&gt;значення)</li>
<li><code>array|string $format = null</code> - формат</li>
</ul>
<h3 id='update'>update()</h3>
<p>Оновити рядок в таблиці</p>

<p><code>$wpdb-&gt;update($table, $data, $where, $format = null, $where_format = null )</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $table</code> - таблиця</li>
<li><code>array $data</code> - дані для вставки (колонка=&gt;значення)</li>
<li><code>array $where</code> - дані для умови where (колонка=&gt;значення)</li>
<li><code>array|string $format = null</code> - формат</li>
<li><code>array $where_format = null</code> - формат для умови where</li>
</ul>
<h3 id='delete'>delete()</h3>
<p>Видалити рядки</p>

<p><code>$wpdb-&gt;delete($table, $where, $where_format = null)</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $table</code> - таблиця</li>
<li><code>array $where</code> - дані для умови where (колонка=&gt;значення)</li>
<li><code>array $where_format = null</code> - формат для умови where</li>
</ul>
<h3 id='query'>query()</h3>
<p>Для виконання кастомних запитів</p>

<p><code>$wpdb-&gt;query(string $query)</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $query</code> - SQL</li>
</ul>

<aside class="warning">
В Цілях безпеки від SQL ін'єкцій, всі запити<br>  
необхідно проганяти через `$wpdb->prepare()`
</aside>
<h3 id='prepare'>prepare()</h3>
<p>Очищує дані перед запитом, для захисту від SLQ Injection.</p>

<p><code>$wpdb-&gt;prepare( $query , value_parameter[, value_parameter ... ] )</code></p>

<p><strong><em>Params:</em></strong></p>

<ul>
<li><code>string $query</code> - SQL</li>
<li><code>int|string|array value_parameter</code> - параметри</li>
</ul>
<h3 id='sql'>Вивід/Відключення виводу sql помилок</h3>
<p>Вивід помилок можна влючити/відключити використовуючи наступні функції</p>

<ul>
<li><code>$wpdb-&gt;show_errors()</code><br></li>
<li><code>$wpdb-&gt;hide_errors()</code><br></li>
<li><code>$wpdb-&gt;print_error()</code><br></li>
</ul>
<h3 id='wpdb-2'>Властивості класу wpdb</h3>
<ul>
<li><code>$show_errors</code> - Чи виводяться помилки.</li>
<li><code>$num_queries</code> - Кількість викликаних запитів.</li>
<li><code>$last_query</code> - Останній виконаний запит.</li>
<li><code>$last_error</code> - Остання помилка MySQL.</li>
<li><code>$queries</code> - Можна зберегти всі викликані запити до бази та їхній час встановивши константу SAVEQUERIES = TRUE.</li>
<li><code>$last_result</code> - Останні результати запиту.</li>
<li><code>$col_info</code> - Інформація колонки останнього запиту.</li>
<li><code>$insert_id</code> - ID згенерована AUTO_INCREMENT колонка з останнього inset запиту.</li>
<li><code>$num_rows</code> - Кількість рядків повернених при останньому запиті.</li>
<li><code>$prefix</code> - Префікс встановлений вордпресом для таблиць для сайту.</li>
<li><code>$base_prefix</code> - Оригінальний префікс визначений в wp-config.php.</li>
</ul>
<h3 id='multi-site-variables'>Multi-Site Variables</h3>
<p>При використанні Multi-Site, також доступні наступні значення:</p>

<ul>
<li><code>$blogid</code> - Id поточного сайту(блогу).</li>
<li><code>$siteid</code> - Id поточної мережі. WordPress зараз підтримує тільки одну мережу на multi-site установку, але це зміниться в майбутньому.</li>
</ul>
<h3 id='tables'>Tables</h3>
<p>Назви таблиць</p>

<ul>
<li><code>$posts</code> - Пости.</li>
<li><code>$postmeta</code> - Мета дані поста.</li>
<li><code>$comments</code> - Коментарі.</li>
<li><code>$commentmeta</code> - Мета дані коментарів.</li>
<li><code>$termmeta</code> - Мета дані термів.</li>
<li><code>$terms</code> - Терми.</li>
<li><code>$term_taxonomy</code> - Таксономії.</li>
<li><code>$term_relationships</code> - Звязки між term та об&#39;єктом який використовує term.</li>
<li><code>$users</code> - Користувачі.</li>
<li><code>$usermeta</code> - Мета дані користувачів.</li>
<li><code>$links</code> - Лінки.</li>
<li><code>$options</code> - Опції.</li>
</ul>
<h3 id='multisite-tables'>Multisite Tables</h3>
<p>Ці таблиці використовуються тільки в multisite установках</p>

<ul>
<li><code>$blogs</code> - Список блогів (сайтів) всередині мережі.</li>
<li><code>$signups</code> - Таблиця реєстрацій.</li>
<li><code>$site</code> - Скписок мереж.</li>
<li><code>$sitemeta</code> - Опції всієї установки multisite.</li>
<li><code>$sitecategories</code> - Категорії сайту.</li>
<li><code>$registration_log</code> - Лог реєстрація.</li>
<li><code>$blog_versions</code> - Таблиця версій блогу.</li>
</ul>
<h1 id='woocommerce'>Woocommerce</h1><h2 id='hooks'>Hooks</h2>
<p><a href="https://docs.woocommerce.com/wc-apidocs/hook-docs.html">WooCommerce hooks reference</a><br>
<a href="https://codex.wordpress.org/Plugin_API/Filter_Reference">Wordpress filter reference</a><br>
<a href="https://codex.wordpress.org/Plugin_API/Action_Reference">Wordpress action reference</a><br>
<a href="https://developer.wordpress.org/reference/hooks/">Wordpress hooks reference</a>  </p>
<h3 id='woocommerce_get_breadcrumb'>woocommerce_get_breadcrumb</h3>
<p>Дозволяє підмінити breadcrums  </p>

<p>Тип: filter   </p>

<p>Параметри:  </p>

<ol>
<li>array - breadcrums</li>
<li>WC_Breadcrumb - object</li>
</ol>
<h3 id='woocommerce_shipping_instance_form_fields_-shipping_title'>woocommerce_shipping_instance_form_fields_{shipping_title}</h3>
<p>Фільтр що повертає масив полів шіппінг методу з назвою shipping_title</p>

<p>Тип: filter</p>
<h3 id='woocommerce_product_options_general_product_data'>woocommerce_product_options_general_product_data</h3>
<p>Спрацьовує коли формується вкладка General в картці продукту</p>

<p>Тип: action</p>
<h3 id='woocommerce_process_product_meta'>woocommerce_process_product_meta</h3>
<p>Спрацьовує на збереження продукту</p>

<p>Тип: action</p>
<h3 id='woocommerce_product_after_variable_attributes'>woocommerce_product_after_variable_attributes</h3>
<p>Спрацьовує коли формується форма для кожного варіанту товара</p>

<p>Тип: action</p>
<h3 id='woocommerce_save_product_variation'>woocommerce_save_product_variation</h3>
<p>Спрацьовує на збереження варіантів товару</p>

<p>Тип: action</p>
<h3 id='woocommerce_product_get_price'>woocommerce_product_get_price</h3>
<p>Спрацьовує в той момент коли береться ціна продукту</p>

<p>Тип: filter</p>
<h3 id='woocommerce_product_get_sale_price'>woocommerce_product_get_sale_price</h3>
<p>Спрацьовує в той момент коли береться ціна продажу продукту</p>

<p>Тип: filter</p>
<h3 id='woocommerce_product_variation_get_price'>woocommerce_product_variation_get_price</h3>
<p>Спрацьовує в той момент коли береться ціна вараінта продукту</p>

<p>Тип: filter</p>
<h3 id='woocommerce_product_variation_get_sale_price'>woocommerce_product_variation_get_sale_price</h3>
<p>Спрацьовує в той момент коли береться ціна продажу вараінта продукту</p>

<p>Тип: filter</p>
<h3 id='woocommerce_variation_prices_price'>woocommerce_variation_prices_price</h3>
<p>Спрацьовує коли формується ціна для варіанту (front price range)</p>

<p>Тип: filter</p>
<h3 id='woocommerce_variation_prices_sale_price'>woocommerce_variation_prices_sale_price</h3>
<p>Спрацьовує коли формується ціна для варіанту (front price range)</p>

<p>Тип: filter</p>
<h1 id='premmerce-dev-tools'>Premmerce Dev Tools</h1>
<p>todo: write this doc</p>
<h1 id='premmerce-woocommerce-brands'>Premmerce WooCommerce Brands</h1>
<p>todo: write this doc</p>
<h1 id='woocommerce-customers-manager'>WooCommerce Customers Manager</h1>
<p>todo: write this doc</p>
<h1 id='woocommerce-permalink-manager'>WooCommerce Permalink Manager</h1>
<p>todo: write this doc</p>
<h1 id='woocommerce-seo-addon'>WooCommerce SEO Addon</h1>
<p>todo: write this doc</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="php">php</a>
          </div>
      </div>
    </div>
  </body>
</html>
